<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
<title>Creator Channel - Bantu Stream Connect</title>
<!-- Google Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Orbitron:wght@400;500;600;700&display=swap" rel="stylesheet">
<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<!-- Supabase JS SDK -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<!-- Swiper JS for carousels -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<!-- CSS Files from content library -->
<link rel="stylesheet" href="css/content-library-themes.css">
<link rel="stylesheet" href="css/content-library-features.css">
<style>
/* Base styles merged from explore-screen and content-library */
:root {
--deep-black: #0A0E12;
--deep-navy: #0F172A;
--soft-white: #F8FAFC;
--slate-grey: #94A3B8;
--bantu-blue: #1D4ED8;
--warm-gold: #F59E0B;
--error-color: #EF4444;
--success-color: #10B981;
--glow-cycle-1: #00A3FF;
--glow-cycle-2: #0066FF;
--glow-cycle-3: #8B5CF6;
--glow-cycle-4: #EC4899;
--card-bg: rgba(15, 23, 42, 0.6);
--card-border: rgba(148, 163, 184, 0.2);
--hover-overlay: rgba(255, 255, 255, 0.05);
--active-overlay: rgba(245, 158, 11, 0.1);
--indigo: #4F46E5;
--gold-glow: rgba(245, 158, 11, 0.3);
--blue-glow: rgba(29, 78, 216, 0.3);
}
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}
body {
font-family: 'Inter', sans-serif;
background: var(--deep-black);
color: var(--soft-white);
min-height: 100vh;
overflow-x: hidden;
transition: background-color 0.3s ease, color 0.3s ease;
}
/* Loading Screen */
.loading-screen {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: var(--deep-black);
display: flex;
flex-direction: column;
align-items: center;
justify-content: center;
z-index: 1000;
}
.spinner {
width: 50px;
height: 50px;
border: 3px solid rgba(255, 255, 255, 0.1);
border-radius: 50%;
border-top-color: var(--bantu-blue);
animation: spin 1s linear infinite;
margin-bottom: 20px;
}
@keyframes spin {
to { transform: rotate(360deg); }
}
/* Animated Background */
.animated-bg {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
z-index: 1;
overflow: hidden;
}
.glow-cycle {
position: absolute;
border-radius: 50%;
filter: blur(60px);
opacity: 0.1;
animation: float 8s infinite ease-in-out;
}
.glow-1 {
width: 400px;
height: 400px;
background: var(--glow-cycle-1);
top: 10%;
left: 5%;
animation-delay: 0s;
}
.glow-2 {
width: 300px;
height: 300px;
background: var(--glow-cycle-2);
top: 60%;
right: 10%;
animation-delay: 2s;
}
.glow-3 {
width: 350px;
height: 350px;
background: var(--glow-cycle-3);
bottom: 10%;
left: 20%;
animation-delay: 4s;
}
.glow-4 {
width: 250px;
height: 250px;
background: var(--glow-cycle-4);
top: 20%;
right: 20%;
animation-delay: 6s;
}
@keyframes float {
0%, 100% { transform: translateY(0) scale(1); }
50% { transform: translateY(-20px) scale(1.05); }
}
/* Main Container */
.container {
max-width: 1200px;
margin: 0 auto;
padding: 24px;
position: relative;
z-index: 2;
padding-bottom: 100px;
}
/* Header */
.header {
background: rgba(10, 14, 18, 0.9);
backdrop-filter: blur(20px);
padding: 12px 24px;
position: sticky;
top: 0;
z-index: 100;
border-bottom: 1px solid var(--card-border);
display: flex;
justify-content: space-between;
align-items: center;
min-height: 60px;
}
.logo {
display: flex;
align-items: center;
gap: 12px;
cursor: pointer;
text-decoration: none;
}
.logo-icon {
width: 40px;
height: 40px;
border-radius: 10px;
display: flex;
align-items: center;
justify-content: center;
box-shadow: 0 0 32px rgba(29, 78, 216, 0.3);
background: transparent;
border: 1px solid rgba(255, 255, 255, 0.1);
}
.logo-text {
font-family: 'Orbitron', sans-serif;
font-weight: 700;
font-size: 17px;
background: linear-gradient(to right, var(--soft-white), var(--bantu-blue));
-webkit-background-clip: text;
background-clip: text;
color: transparent;
letter-spacing: 0.5px;
}
.header-actions {
display: flex;
gap: 10px;
align-items: center;
}
.icon-btn {
width: 38px;
height: 38px;
border-radius: 50%;
background: rgba(255, 255, 255, 0.1);
border: 1px solid rgba(255, 255, 255, 0.2);
color: var(--soft-white);
display: flex;
align-items: center;
justify-content: center;
cursor: pointer;
transition: all 0.3s ease;
position: relative;
}
.icon-btn:hover {
background: rgba(255, 255, 255, 0.2);
transform: translateY(-2px);
}
.notification-badge {
position: absolute;
top: -5px;
right: -5px;
background: var(--error-color);
color: white;
font-size: 10px;
font-weight: bold;
width: 18px;
height: 18px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
border: 2px solid var(--deep-black);
}
.profile-btn {
width: 38px;
height: 38px;
border-radius: 50%;
background: linear-gradient(135deg, var(--bantu-blue), var(--warm-gold));
border: 2px solid rgba(255, 255, 255, 0.2);
cursor: pointer;
overflow: hidden;
transition: all 0.3s ease;
display: flex;
align-items: center;
justify-content: center;
color: white;
font-weight: 600;
font-size: 14px;
}
.profile-btn:hover {
transform: translateY(-2px);
box-shadow: 0 8px 20px rgba(29, 78, 216, 0.3);
}
.profile-img {
width: 100%;
height: 100%;
object-fit: cover;
}
.profile-placeholder {
width: 100%;
height: 100%;
display: flex;
align-items: center;
justify-content: center;
background: linear-gradient(135deg, var(--bantu-blue), var(--warm-gold));
color: white;
font-size: 14px;
}
/* Creator Header Section - PERFECT CIRCLE AVATAR */
.creator-header {
background: var(--card-bg);
border: 1px solid var(--card-border);
border-radius: 24px;
padding: 40px;
margin-bottom: 30px;
backdrop-filter: blur(10px);
box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
position: relative;
overflow: hidden;
border-top: 2px solid var(--warm-gold);
}
.creator-header::before {
content: '';
position: absolute;
top: -2px;
left: -2px;
right: -2px;
bottom: -2px;
background: linear-gradient(45deg, var(--warm-gold), var(--bantu-blue), var(--warm-gold));
border-radius: 26px;
z-index: -1;
opacity: 0.1;
animation: pulse-glow 3s infinite alternate;
}
@keyframes pulse-glow {
0% { opacity: 0.1; }
100% { opacity: 0.3; }
}
.creator-info {
display: flex;
align-items: center;
gap: 30px;
position: relative;
z-index: 1;
}
@media (max-width: 768px) {
.creator-info {
flex-direction: column;
text-align: center;
gap: 20px;
}
}
.creator-avatar-container {
position: relative;
width: 130px;
height: 130px;
}
.creator-avatar {
width: 100%;
height: 100%;
border-radius: 50%;
overflow: hidden;
border: 4px solid var(--warm-gold);
box-shadow: 0 0 25px rgba(245, 158, 11, 0.4);
display: flex;
align-items: center;
justify-content: center;
background: linear-gradient(135deg, var(--bantu-blue), var(--warm-gold));
flex-shrink: 0;
}
.creator-avatar img {
width: 100%;
height: 100%;
object-fit: cover;
display: block;
border-radius: 50%;
}
.creator-initials {
width: 100%;
height: 100%;
display: flex;
align-items: center;
justify-content: center;
background: linear-gradient(135deg, var(--bantu-blue), var(--warm-gold));
color: white;
font-size: 48px;
font-weight: bold;
border-radius: 50%;
}
.founder-badge {
position: absolute;
top: -10px;
right: -10px;
background: linear-gradient(135deg, var(--warm-gold), #f97316);
color: var(--deep-black);
padding: 5px 15px;
border-radius: 20px;
font-size: 12px;
font-weight: bold;
box-shadow: 0 4px 15px rgba(245, 158, 11, 0.4);
z-index: 2;
}
.creator-details {
flex: 1;
}
.creator-name {
font-family: 'Orbitron', sans-serif;
font-size: 32px;
font-weight: 700;
margin-bottom: 10px;
background: linear-gradient(135deg, var(--soft-white), var(--warm-gold));
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
}
.creator-username {
font-size: 18px;
color: var(--slate-grey);
margin-bottom: 20px;
}
.creator-bio {
font-size: 16px;
line-height: 1.6;
color: rgba(248, 250, 252, 0.8);
margin-bottom: 20px;
min-height: 60px;
display: -webkit-box;
-webkit-line-clamp: 3;
-webkit-box-orient: vertical;
overflow: hidden;
}
/* Stats Section */
.stats-section {
display: grid;
grid-template-columns: repeat(3, 1fr);
gap: 20px;
margin-bottom: 30px;
}
@media (max-width: 768px) {
.stats-section {
grid-template-columns: 1fr;
}
}
.stat-card {
background: var(--card-bg);
border: 1px solid var(--card-border);
border-radius: 20px;
padding: 25px;
text-align: center;
transition: all 0.3s ease;
backdrop-filter: blur(10px);
}
.stat-card:hover {
transform: translateY(-5px);
box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
border-color: rgba(245, 158, 11, 0.3);
}
.stat-number {
font-family: 'Orbitron', sans-serif;
font-size: 32px;
font-weight: 700;
color: var(--warm-gold);
margin-bottom: 10px;
}
.stat-label {
font-size: 16px;
color: var(--slate-grey);
}
/* Action Buttons */
.action-buttons {
display: flex;
gap: 20px;
margin-bottom: 40px;
}
@media (max-width: 768px) {
.action-buttons {
flex-direction: column;
}
}
.action-btn {
flex: 1;
padding: 18px;
border-radius: 12px;
font-size: 16px;
font-weight: 600;
cursor: pointer;
display: flex;
align-items: center;
justify-content: center;
gap: 10px;
transition: all 0.3s ease;
border: none;
backdrop-filter: blur(10px);
}
.connect-btn {
background: linear-gradient(135deg, var(--warm-gold), var(--bantu-blue));
color: var(--soft-white);
border: 1px solid rgba(255, 255, 255, 0.1);
}
.connect-btn:hover:not(:disabled) {
transform: translateY(-3px);
box-shadow: 0 10px 25px rgba(245, 158, 11, 0.4);
}
.connected-btn {
background: linear-gradient(135deg, var(--success-color), #059669);
color: white;
border: 1px solid rgba(255, 255, 255, 0.1);
}
.connected-btn:hover:not(:disabled) {
transform: translateY(-3px);
box-shadow: 0 10px 25px rgba(16, 185, 129, 0.4);
}
.share-btn {
background: var(--card-bg);
border: 1px solid var(--card-border);
color: var(--soft-white);
}
.share-btn:hover:not(:disabled) {
background: rgba(255, 255, 255, 0.1);
transform: translateY(-3px);
border-color: var(--warm-gold);
}
.action-btn:disabled {
opacity: 0.5;
cursor: not-allowed;
}
/* Content Sections */
.section {
margin-bottom: 40px;
}
.section-header {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 20px;
}
.section-title {
font-family: 'Orbitron', sans-serif;
font-size: 24px;
font-weight: 700;
background: linear-gradient(135deg, var(--soft-white), var(--warm-gold));
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
display: flex;
align-items: center;
gap: 10px;
}
.see-all-btn {
padding: 10px 20px;
background: rgba(255, 255, 255, 0.1);
border: 1px solid var(--card-border);
border-radius: 10px;
color: var(--warm-gold);
font-size: 14px;
font-weight: 500;
cursor: pointer;
transition: all 0.3s ease;
display: flex;
align-items: center;
gap: 8px;
text-decoration: none;
}
.see-all-btn:hover {
background: rgba(255, 255, 255, 0.2);
border-color: var(--warm-gold);
}
/* Content Grid */
.content-grid {
display: grid;
grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
gap: 20px;
}
@media (max-width: 768px) {
.content-grid {
grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
}
}
@media (max-width: 480px) {
.content-grid {
grid-template-columns: repeat(2, 1fr);
}
}
/* Content Card */
.content-card {
background: var(--card-bg);
border: 1px solid var(--card-border);
border-radius: 20px;
overflow: hidden;
transition: all 0.3s ease;
cursor: pointer;
text-decoration: none;
color: inherit;
backdrop-filter: blur(10px);
position: relative;
}
.content-card:hover {
transform: translateY(-8px);
box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
border-color: rgba(245, 158, 11, 0.3);
}
.card-thumbnail {
position: relative;
height: 140px;
overflow: hidden;
}
.card-thumbnail img {
width: 100%;
height: 100%;
object-fit: cover;
transition: transform 0.3s ease;
}
.content-card:hover .card-thumbnail img {
transform: scale(1.05);
}
.thumbnail-overlay {
position: absolute;
top: 0;
left: 0;
right: 0;
bottom: 0;
background: linear-gradient(to bottom, transparent 50%, rgba(0, 0, 0, 0.5) 100%);
}
.play-overlay {
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0, 0, 0, 0.5);
display: flex;
align-items: center;
justify-content: center;
opacity: 0;
transition: opacity 0.3s ease;
}
.content-card:hover .play-overlay {
opacity: 1;
}
.play-icon {
width: 50px;
height: 50px;
background: rgba(245, 158, 11, 0.9);
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
color: var(--deep-black);
font-size: 1.5rem;
transform: scale(0.8);
transition: all 0.3s ease;
}
.content-card:hover .play-icon {
transform: scale(1);
}
.card-badges {
position: absolute;
top: 10px;
left: 10px;
display: flex;
gap: 0.5rem;
z-index: 2;
}
.card-badge {
padding: 4px 12px;
background: rgba(0, 0, 0, 0.7);
border-radius: 12px;
color: var(--soft-white);
font-size: 11px;
font-weight: 600;
display: flex;
align-items: center;
gap: 4px;
backdrop-filter: blur(4px);
}
.badge-trending {
background: rgba(245, 158, 11, 0.9);
}
.badge-new {
background: rgba(29, 78, 216, 0.9);
}
.badge-live {
background: rgba(239, 68, 68, 0.9);
}
.card-content {
padding: 15px;
}
.card-title {
font-size: 16px;
font-weight: 600;
margin-bottom: 10px;
display: -webkit-box;
-webkit-line-clamp: 2;
-webkit-box-orient: vertical;
overflow: hidden;
min-height: 40px;
color: var(--soft-white);
line-height: 1.4;
}
.creator-info {
display: flex;
align-items: center;
gap: 10px;
margin-bottom: 10px;
}
.creator-avatar-small {
width: 30px;
height: 30px;
border-radius: 50%;
overflow: hidden;
display: flex;
align-items: center;
justify-content: center;
background: linear-gradient(135deg, var(--bantu-blue), var(--warm-gold));
color: white;
font-weight: bold;
font-size: 12px;
flex-shrink: 0;
}
.creator-avatar-small img {
width: 100%;
height: 100%;
object-fit: cover;
}
.creator-name-small {
font-size: 14px;
color: var(--slate-grey);
}
.creator-btn {
background: linear-gradient(135deg, var(--bantu-blue), var(--warm-gold));
color: var(--soft-white);
border: none;
padding: 8px 15px;
border-radius: 10px;
font-size: 12px;
font-weight: 500;
cursor: pointer;
display: inline-flex;
align-items: center;
gap: 5px;
transition: all 0.3s ease;
border: 1px solid rgba(255, 255, 255, 0.1);
margin-bottom: 10px;
}
.creator-btn:hover {
transform: translateY(-2px);
box-shadow: 0 4px 12px rgba(29, 78, 216, 0.4);
}
.card-stats {
display: flex;
gap: 15px;
margin-top: 8px;
font-size: 12px;
color: var(--slate-grey);
}
.card-stat {
display: flex;
align-items: center;
gap: 4px;
}
.card-stat i {
color: var(--bantu-blue);
font-size: 12px;
}
.card-meta {
display: flex;
justify-content: space-between;
font-size: 12px;
color: var(--slate-grey);
}
/* Empty State */
.empty-state {
text-align: center;
padding: 60px 20px;
color: var(--slate-grey);
background: var(--card-bg);
border: 1px solid var(--card-border);
border-radius: 16px;
backdrop-filter: blur(10px);
}
.empty-icon {
font-size: 48px;
margin-bottom: 20px;
color: var(--warm-gold);
opacity: 0.5;
}
/* Footer */
.footer {
background: var(--card-bg);
border-top: 1px solid var(--card-border);
padding: 30px 20px;
margin-top: 50px;
backdrop-filter: blur(10px);
position: relative;
z-index: 2;
}
.footer p {
text-align: center;
color: var(--slate-grey);
margin-bottom: 15px;
font-size: 14px;
}
.footer-links {
display: flex;
justify-content: center;
gap: 20px;
flex-wrap: wrap;
}
.footer-links a {
color: var(--slate-grey);
text-decoration: none;
transition: color 0.3s ease;
font-size: 14px;
}
.footer-links a:hover {
color: var(--warm-gold);
}
/* Toast Container */
#toast-container {
position: fixed;
bottom: 20px;
right: 20px;
z-index: 9999;
display: flex;
flex-direction: column;
gap: 10px;
}
.toast {
padding: 15px 25px;
border-radius: 12px;
color: var(--soft-white);
font-weight: 500;
animation: slideIn 0.3s ease;
max-width: 300px;
backdrop-filter: blur(10px);
border: 1px solid var(--card-border);
display: flex;
align-items: center;
gap: 10px;
box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
}
.toast i {
font-size: 18px;
}
.toast.error {
background: rgba(239, 68, 68, 0.9);
}
.toast.success {
background: rgba(16, 185, 129, 0.9);
}
.toast.warning {
background: rgba(245, 158, 11, 0.9);
}
.toast.info {
background: var(--card-bg);
border: 1px solid var(--card-border);
}
@keyframes slideIn {
from {
transform: translateX(100%);
opacity: 0;
}
to {
transform: translateX(0);
opacity: 1;
}
}
/* Modals */
.modal {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0, 0, 0, 0.8);
display: none;
align-items: center;
justify-content: center;
z-index: 2000;
backdrop-filter: blur(5px);
}
.modal.active {
display: flex;
}
.modal-content {
background: var(--card-bg);
border: 1px solid var(--card-border);
border-radius: 20px;
padding: 40px;
max-width: 500px;
width: 90%;
max-height: 80vh;
overflow-y: auto;
backdrop-filter: blur(10px);
}
.modal-title {
font-family: 'Orbitron', sans-serif;
font-size: 24px;
margin-bottom: 20px;
color: var(--soft-white);
text-align: center;
background: linear-gradient(135deg, var(--soft-white), var(--warm-gold));
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
}
.connectors-list {
max-height: 50vh;
overflow-y: auto;
margin-bottom: 20px;
}
.connector-item {
display: flex;
align-items: center;
gap: 15px;
padding: 15px;
background: rgba(255, 255, 255, 0.05);
border-radius: 10px;
margin-bottom: 10px;
border: 1px solid var(--card-border);
}
.connector-avatar {
width: 40px;
height: 40px;
border-radius: 50%;
overflow: hidden;
border: 2px solid var(--warm-gold);
}
.connector-avatar img {
width: 100%;
height: 100%;
object-fit: cover;
}
.connector-info {
flex: 1;
}
.connector-name {
font-weight: 600;
margin-bottom: 5px;
color: var(--soft-white);
}
.connector-username {
font-size: 14px;
color: var(--slate-grey);
}
.modal-actions {
display: flex;
gap: 15px;
}
.modal-btn {
flex: 1;
padding: 12px;
border-radius: 10px;
border: none;
font-size: 16px;
font-weight: 600;
cursor: pointer;
transition: all 0.3s ease;
}
.modal-btn.close {
background: linear-gradient(135deg, var(--warm-gold), var(--bantu-blue));
color: var(--soft-white);
border: 1px solid rgba(255, 255, 255, 0.1);
}
.modal-btn.close:hover {
transform: translateY(-2px);
box-shadow: 0 4px 15px rgba(245, 158, 11, 0.4);
}
/* Custom Scrollbar */
::-webkit-scrollbar {
width: 8px;
height: 8px;
}
::-webkit-scrollbar-track {
background: var(--deep-navy);
}
::-webkit-scrollbar-thumb {
background: var(--bantu-blue);
border-radius: 4px;
}
::-webkit-scrollbar-thumb:hover {
background: var(--warm-gold);
}
/* Responsive */
@media (max-width: 768px) {
.container {
padding: 16px;
padding-bottom: 130px;
}
.creator-header {
padding: 30px 20px;
}
.creator-avatar-container {
width: 110px;
height: 110px;
}
.creator-name {
font-size: 28px;
}
.creator-username {
font-size: 16px;
}
.stat-number {
font-size: 28px;
}
.action-buttons {
gap: 15px;
}
.action-btn {
padding: 15px;
font-size: 15px;
}
.section-header {
flex-direction: column;
align-items: flex-start;
gap: 10px;
}
}
@media (max-width: 480px) {
.creator-avatar-container {
width: 100px;
height: 100px;
}
.creator-initials {
font-size: 40px;
}
.creator-name {
font-size: 24px;
}
.stat-number {
font-size: 24px;
}
.stat-label {
font-size: 14px;
}
.action-btn {
padding: 14px;
font-size: 14px;
}
.content-grid {
grid-template-columns: repeat(2, 1fr);
}
.header {
padding: 8px 14px;
min-height: 48px;
}
.logo-icon {
width: 30px;
height: 30px;
}
.logo-text {
font-size: 14px;
max-width: 130px;
}
.icon-btn, .profile-btn {
width: 34px;
height: 34px;
}
}
/* Accessibility & Touch Targets */
@media (hover: none) and (pointer: coarse) {
.icon-btn, .profile-btn, .nav-icon, .creator-btn, .action-btn {
min-width: 44px !important;
min-height: 44px !important;
}
.header, .navigation-button, .footer {
-webkit-tap-highlight-color: transparent;
user-select: none;
}
}
</style>
</head>
<body>
<!-- Loading Screen -->
<div id="loading" class="loading-screen">
<div class="spinner"></div>
<div id="loading-text">Loading Creator Channel...</div>
</div>
<!-- Animated Background -->
<div class="animated-bg">
<div class="glow-cycle glow-1"></div>
<div class="glow-cycle glow-2"></div>
<div class="glow-cycle glow-3"></div>
<div class="glow-cycle glow-4"></div>
</div>
<!-- Connectors Modal -->
<div id="connectors-modal" class="modal">
<div class="modal-content">
<h2 class="modal-title" id="modal-title">Connectors (0)</h2>
<div id="connectors-list" class="connectors-list">
<!-- Connectors will be loaded here -->
</div>
<div class="modal-actions">
<button id="close-modal-btn" class="modal-btn close">Close</button>
</div>
</div>
</div>
<!-- Main Content (hidden until loaded) -->
<div id="app" style="display: none;">
<!-- Header -->
<header class="header">
<div class="logo" onclick="window.location.href='index.html'">
<div class="logo-icon">
<i class="fas fa-film" style="color: var(--warm-gold); font-size: 20px;"></i>
</div>
<div class="logo-text">BANTU STREAM CONNECT</div>
</div>
<div class="header-actions">
<!-- Analytics Button -->
<button id="analytics-btn" class="icon-btn" title="Analytics">
<i class="fas fa-chart-line"></i>
</button>
<!-- Search Button -->
<button id="search-btn" class="icon-btn search-btn" title="Search">
<i class="fas fa-search"></i>
</button>
<!-- Notifications Button -->
<button id="notifications-btn" class="icon-btn" title="Notifications">
<i class="fas fa-bell"></i>
<span class="notification-badge" id="notification-count" style="display: none;">0</span>
</button>
<!-- Profile Button -->
<button id="profile-btn" class="profile-btn" title="Profile">
<div class="profile-placeholder" id="userProfilePlaceholder">
<i class="fas fa-user"></i>
</div>
</button>
</div>
</header>
<!-- Main Content -->
<main class="container">
<!-- Creator Header -->
<section id="creator-header" class="creator-header">
<div class="creator-info">
<div class="creator-avatar-container">
<div class="creator-avatar" id="creator-avatar-container">
<!-- Avatar or initials will be loaded here -->
</div>
<div id="founder-badge" class="founder-badge" style="display: none;">FOUNDER</div>
</div>
<div class="creator-details">
<h1 id="creator-name" class="creator-name">Creator Name</h1>
<div id="creator-username" class="creator-username">@username</div>
<div id="creator-bio" class="creator-bio">Creator bio will appear here</div>
</div>
</div>
</section>
<!-- Stats Section -->
<section class="stats-section">
<div class="stat-card">
<div id="videos-count" class="stat-number">0</div>
<div class="stat-label">Videos</div>
</div>
<div class="stat-card" id="connectors-stat-card" onclick="showConnectorsModal()">
<div id="connectors-count" class="stat-number">0</div>
<div class="stat-label">Connectors</div>
</div>
<div class="stat-card">
<div id="uploads-count" class="stat-number">0</div>
<div class="stat-label">Uploads</div>
</div>
</section>
<!-- Action Buttons -->
<section class="action-buttons">
<button id="connect-btn" class="action-btn connect-btn">
<i class="fas fa-link"></i>
<span id="connect-text">Connect</span>
</button>
<button id="share-btn" class="action-btn share-btn">
<i class="fas fa-share"></i>
Share Channel
</button>
</section>
<!-- Live Streams Section -->
<section class="section">
<div class="section-header">
<h2 class="section-title">
<i class="fas fa-circle" style="color: #EF4444; font-size: 20px;"></i>
LIVE NOW
</h2>
<a href="https://bantustreamconnect.com/live-streams" class="see-all-btn">
See All
<i class="fas fa-arrow-right"></i>
</a>
</div>
<div class="content-grid" id="live-streams-grid">
<!-- Live streams will be loaded here -->
</div>
<div id="no-live-streams" class="empty-state" style="display: none; grid-column: 1 / -1;">
<div class="empty-icon">
<i class="fas fa-broadcast-tower"></i>
</div>
<h3>No Live Streams</h3>
<p>This creator isn't live right now</p>
</div>
</section>
<!-- Trending Content Section -->
<section class="section">
<div class="section-header">
<h2 class="section-title">
<i class="fas fa-fire" style="color: var(--warm-gold);"></i>
TRENDING NOW
</h2>
<a href="https://bantustreamconnect.com/trending_screen" class="see-all-btn">
See All
<i class="fas fa-arrow-right"></i>
</a>
</div>
<div class="content-grid" id="trending-grid">
<!-- Trending content will be loaded here -->
</div>
<div id="no-trending" class="empty-state" style="display: none; grid-column: 1 / -1;">
<div class="empty-icon">
<i class="fas fa-chart-line"></i>
</div>
<h3>No Trending Content</h3>
<p>This creator has no trending content yet</p>
</div>
</section>
<!-- Latest Uploads Section -->
<section class="section">
<div class="section-header">
<h2 class="section-title">
<i class="fas fa-gem" style="color: var(--bantu-blue);"></i>
LATEST UPLOADS
</h2>
<a href="https://bantustreamconnect.com/content-library" class="see-all-btn">
See All
<i class="fas fa-arrow-right"></i>
</a>
</div>
<div class="content-grid" id="new-content-grid">
<!-- New content will be loaded here -->
</div>
<div id="no-content" class="empty-state" style="display: none; grid-column: 1 / -1;">
<div class="empty-icon">
<i class="fas fa-video-slash"></i>
</div>
<h3>No Uploads Yet</h3>
<p>This creator hasn't uploaded any content</p>
</div>
</section>
</main>
<!-- Footer -->
<footer class="footer">
<p>Bantu Stream Connect ¬© 2025 ‚Ä¢ Built in South Africa ‚Ä¢ NO DNA, JUST RSA</p>
<div class="footer-links">
<a href="privacy-policy.html">Privacy Policy</a>
<a href="terms-of-service.html">Terms of Service</a>
<a href="support.html">Support</a>
</div>
</footer>
<!-- Global Navigation Button - Fixed with centered icons -->
<div class="navigation-button-container">
<div class="navigation-button">
<div class="nav-icon" id="nav-home-btn" title="Home">
<i class="fas fa-home"></i>
</div>
<div class="nav-icon" id="nav-theme-toggle" title="Change Theme">
<i class="fas fa-palette"></i>
</div>
<div class="nav-icon" id="nav-create-btn" title="Create Content">
<i class="fas fa-plus-circle"></i>
</div>
<div class="nav-icon" id="nav-dashboard-btn" title="Creator Dashboard">
<i class="fas fa-tachometer-alt"></i>
</div>
<div class="nav-icon" id="nav-notifications-btn" title="Notifications">
<i class="fas fa-bell"></i>
<span class="nav-notification-badge" id="nav-notification-count" style="display: none;">0</span>
</div>
</div>
</div>
<!-- Toast Container -->
<div id="toast-container"></div>
<!-- Back to Top Button -->
<button id="backToTopBtn" class="back-to-top">
<i class="fas fa-arrow-up"></i>
</button>
</div>
<!-- =================================================================== -->
<!-- MODALS & PANELS                                                     -->
<!-- =================================================================== -->
<!-- Analytics Modal -->
<div id="analytics-modal" class="analytics-modal">
<div class="analytics-content">
<div class="analytics-header">
<h2>Platform Analytics</h2>
<button id="close-analytics" class="close-search-btn">
<i class="fas fa-times"></i>
</button>
</div>
<div class="analytics-body">
<div class="analytics-grid">
<div class="analytics-card">
<h3>Total Views</h3>
<div class="analytics-value" id="total-views">0</div>
<div class="analytics-trend" id="views-trend">+0%</div>
</div>
<div class="analytics-card">
<h3>Total Content</h3>
<div class="analytics-value" id="total-content">0</div>
<div class="analytics-trend" id="content-trend">+0%</div>
</div>
<div class="analytics-card">
<h3>Active Creators</h3>
<div class="analytics-value" id="active-creators">0</div>
<div class="analytics-trend" id="creators-trend">+0%</div>
</div>
<div class="analytics-card">
<h3>Engagement</h3>
<div class="analytics-value" id="engagement-rate">0%</div>
<div class="analytics-trend" id="engagement-trend">+0%</div>
</div>
</div>
<div class="charts-container">
<!-- Charts would be rendered here dynamically -->
</div>
</div>
</div>
</div>
<!-- Search Modal -->
<div id="search-modal" class="search-modal">
<div class="search-modal-header">
<div class="search-input-container">
<i class="search-icon fas fa-search"></i>
<input type="text" id="search-input" class="search-input" placeholder="Search content, creators, or categories..." autocomplete="off">
</div>
<button id="close-search-btn" class="close-search-btn">
<i class="fas fa-times"></i>
</button>
</div>
<div class="search-filters">
<div class="filter-group">
<label class="filter-label">Category</label>
<select id="category-filter" class="filter-select">
<option value="">All Categories</option>
<option value="Music">Music</option>
<option value="STEM">STEM</option>
<option value="Culture">Culture</option>
<option value="News">News</option>
<option value="Sports">Sports</option>
<option value="Movies">Movies</option>
<option value="Documentaries">Documentaries</option>
<option value="Podcasts">Podcasts</option>
</select>
</div>
<div class="filter-group">
<label class="filter-label">Sort By</label>
<select id="sort-filter" class="filter-select">
<option value="newest">Newest First</option>
<option value="popular">Most Popular</option>
<option value="trending">Trending</option>
</select>
</div>
</div>
<div id="search-results" class="search-results">
<div id="search-results-grid" class="search-results-grid">
<!-- Results loaded here -->
</div>
</div>
</div>
<!-- Notifications Panel -->
<div id="notifications-panel" class="notifications-panel">
<div class="notifications-header">
<h2>Notifications</h2>
<button id="close-notifications" class="icon-btn">
<i class="fas fa-times"></i>
</button>
</div>
<div class="notifications-list" id="notifications-list">
<!-- Notifications loaded here -->
</div>
<div class="notifications-footer">
<button id="mark-all-read" class="text-btn">Mark all as read</button>
<button id="notification-settings" class="text-btn">Settings</button>
</div>
</div>
<!-- Theme Selector -->
<div id="theme-selector" class="theme-selector">
<button class="theme-option" data-theme="dark">
<i class="fas fa-moon"></i> Dark
</button>
<button class="theme-option" data-theme="light">
<i class="fas fa-sun"></i> Light
</button>
<button class="theme-option" data-theme="high-contrast">
<i class="fas fa-eye"></i> High Contrast
</button>
</div>
<!-- JavaScript Files (load in correct order) -->
<script src="env.js"></script>
<script src="js/rate-limiter.js"></script>
<script src="js/content-library-themes.js"></script>
<script src="js/content-library-features.js"></script>
<!-- Simple Supabase REST client for content queries -->
<script>
// Simple Supabase REST client for content queries (not authentication)
class ContentSupabaseClient {
constructor(url, key) {
this.url = url;
this.key = key;
}
async query(table, options = {}) {
const {
select = '*',
where = {},
orderBy = 'created_at',
order = 'desc',
limit = 100,
offset = 0
} = options;
// Build query URL
let queryUrl = `${this.url}/rest/v1/${table}?select=${select}`;
// Add filters
Object.keys(where).forEach(key => {
queryUrl += `&${key}=eq.${encodeURIComponent(where[key])}`;
});
// Add ordering
if (orderBy) {
queryUrl += `&order=${orderBy}.${order}`;
}
// Add limit and offset
queryUrl += `&limit=${limit}&offset=${offset}`;
try {
const response = await fetch(queryUrl, {
headers: {
'apikey': this.key,
'Authorization': `Bearer ${this.key}`,
'Content-Type': 'application/json'
}
});
if (!response.ok) {
throw new Error(`HTTP error! status: ${response.status}`);
}
return await response.json();
} catch (error) {
console.error('Supabase query error:', error);
throw error;
}
}
// Fix media URL helper
fixMediaUrl(url) {
if (!url) return '';
if (url.startsWith('http')) return url;
if (url.includes('supabase.co')) return url;
return `https://ydnxqnbjoshvxteevemc.supabase.co/storage/v1/object/public/${url.replace(/^\/+/, '')}`;
}
}
// Initialize content Supabase client
const contentSupabase = new ContentSupabaseClient(
'https://ydnxqnbjoshvxteevemc.supabase.co',
'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlkbnhxbmJqb3Nodnh0ZWV2ZW1jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc2MzI0OTMsImV4cCI6MjA3MzIwODQ5M30.NlaCCnLPSz1mM7AFeSlfZQ78kYEKUMh_Fi-7P_ccs_U'
);
console.log('‚úÖ Content Supabase client initialized');
</script>
<!-- Creator Channel JavaScript with all features -->
<script>
// Supabase Configuration
const SUPABASE_URL = 'https://ydnxqnbjoshvxteevemc.supabase.co';
const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlkbnhxbmJqb3Nodnh0ZWV2ZW1jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc2MzI0OTMsImV4cCI6MjA3MzIwODQ5M30.NlaCCnLPSz1mM7AFeSlfZQ78kYEKUMh_Fi-7P_ccs_U';
// Initialize Supabase client for authentication
const supabaseAuth = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
console.log('‚úÖ Supabase Auth client initialized');
// Global state variables
window.currentUser = null;
window.notifications = [];
window.creatorId = null;
window.creatorProfile = null;
window.isConnected = false;
window.connectorCount = 0;
// Wait for DOM to be ready
document.addEventListener('DOMContentLoaded', async () => {
console.log('üë§ Creator Channel Initializing with all features...');
// DOM Elements
const loadingScreen = document.getElementById('loading');
const loadingText = document.getElementById('loading-text');
const app = document.getElementById('app');
// ============================================
// UTILITY FUNCTIONS
// ============================================
// Show toast message
function showToast(message, type = 'info') {
const container = document.getElementById('toast-container');
if (!container) return;
const toast = document.createElement('div');
toast.className = `toast ${type}`;
const icons = {
error: 'fa-exclamation-triangle',
success: 'fa-check-circle',
warning: 'fa-exclamation-circle',
info: 'fa-info-circle'
};
toast.innerHTML = `
<i class="fas ${icons[type] || 'fa-info-circle'}"></i>
<span>${escapeHtml(message)}</span>
`;
container.appendChild(toast);
// Auto-dismiss after 3 seconds
setTimeout(() => {
toast.style.opacity = '0';
toast.style.transform = 'translateX(100%)';
setTimeout(() => toast.remove(), 300);
}, 3000);
}
// Format large numbers
function formatNumber(num) {
if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
return num.toString();
}
// Truncate text with ellipsis
function truncateText(text, maxLength) {
if (!text) return '';
if (text.length <= maxLength) return text;
return text.substring(0, maxLength) + '...';
}
// Escape HTML to prevent XSS
function escapeHtml(text) {
if (!text) return '';
const div = document.createElement('div');
div.textContent = text;
return div.innerHTML;
}
// Format date
function formatDate(dateString) {
if (!dateString) return '';
try {
const date = new Date(dateString);
const now = new Date();
const diffTime = Math.abs(now - date);
const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
if (diffDays === 0) {
return 'Today';
} else if (diffDays === 1) {
return 'Yesterday';
} else if (diffDays < 7) {
return `${diffDays} days ago`;
} else if (diffDays < 30) {
const weeks = Math.floor(diffDays / 7);
return `${weeks} week${weeks > 1 ? 's' : ''} ago`;
} else {
return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
}
} catch (error) {
return '';
}
}
// Get initials from name
function getInitials(name) {
if (!name || name.trim() === '') return '?';
const names = name.trim().split(' ');
if (names.length >= 2) {
return (names[0][0] + names[names.length - 1][0]).toUpperCase();
}
return name[0].toUpperCase();
}
// Fix media URL helper
function fixMediaUrl(url) {
if (!url) return '';
if (url.startsWith('http')) return url;
return `https://ydnxqnbjoshvxteevemc.supabase.co/storage/v1/object/public/${url.replace(/^\/+/, '')}`;
}
// ============================================
// AUTHENTICATION FUNCTIONS
// ============================================
// Check authentication status
async function checkAuth() {
try {
const { data: { session }, error } = await supabaseAuth.auth.getSession();
if (error) throw error;
window.currentUser = session?.user || null;
if (window.currentUser) {
console.log('‚úÖ User authenticated:', window.currentUser.email);
await loadUserProfile();
} else {
console.log('‚ö†Ô∏è User not authenticated');
updateProfileUI(null);
}
return window.currentUser;
} catch (error) {
console.error('Auth check error:', error);
return null;
}
}
// Load user profile from database
async function loadUserProfile() {
try {
if (!window.currentUser) return;
const { data: profile, error } = await supabaseAuth
.from('user_profiles')
.select('*')
.eq('id', window.currentUser.id)
.maybeSingle();
if (error) {
console.warn('Profile fetch error:', error);
updateProfileUI(null);
return;
}
updateProfileUI(profile);
await loadNotifications();
} catch (error) {
console.error('Error loading profile:', error);
updateProfileUI(null);
}
}
// Update profile UI with user data
function updateProfileUI(profile) {
const userProfilePlaceholder = document.getElementById('userProfilePlaceholder');
if (!userProfilePlaceholder) return;
// Clear existing content safely
while (userProfilePlaceholder.firstChild) {
userProfilePlaceholder.removeChild(userProfilePlaceholder.firstChild);
}
if (profile) {
const displayName = profile.full_name ||
profile.username ||
window.currentUser?.email ||
'User';
const initial = getInitials(displayName);
const avatarUrl = profile.avatar_url;
if (avatarUrl) {
const img = document.createElement('img');
img.className = 'profile-img';
img.alt = displayName;
img.style.cssText = 'width: 100%; height: 100%; border-radius: 50%; object-fit: cover;';
// Validate and construct URL safely
try {
if (avatarUrl.startsWith('http')) {
img.src = avatarUrl;
} else if (avatarUrl.startsWith('avatars/')) {
img.src = `${SUPABASE_URL}/storage/v1/object/public/${avatarUrl}`;
} else {
img.src = `${SUPABASE_URL}/storage/v1/object/public/avatars/${avatarUrl}`;
}
img.onerror = () => {
const fallback = document.createElement('div');
fallback.className = 'profile-placeholder';
fallback.style.cssText = 'width:100%;height:100%;border-radius:50%;background:linear-gradient(135deg,#1D4ED8,#F59E0B);display:flex;align-items:center;justify-content:center;color:white;font-weight:bold;font-size:16px';
fallback.textContent = initial;
userProfilePlaceholder.innerHTML = '';
userProfilePlaceholder.appendChild(fallback);
};
userProfilePlaceholder.appendChild(img);
} catch (e) {
console.error('Invalid avatar URL:', e);
const fallback = document.createElement('div');
fallback.className = 'profile-placeholder';
fallback.style.cssText = 'width:100%;height:100%;border-radius:50%;background:linear-gradient(135deg,#1D4ED8,#F59E0B);display:flex;align-items:center;justify-content:center;color:white;font-weight:bold;font-size:16px';
fallback.textContent = initial;
userProfilePlaceholder.appendChild(fallback);
}
} else {
// Show initials if no avatar
const fallback = document.createElement('div');
fallback.className = 'profile-placeholder';
fallback.style.cssText = 'width:100%;height:100%;border-radius:50%;background:linear-gradient(135deg,#1D4ED8,#F59E0B);display:flex;align-items:center;justify-content:center;color:white;font-weight:bold;font-size:16px';
fallback.textContent = initial;
userProfilePlaceholder.appendChild(fallback);
}
} else {
const icon = document.createElement('i');
icon.className = 'fas fa-user';
userProfilePlaceholder.appendChild(icon);
}
}
// ============================================
// NOTIFICATIONS FUNCTIONS
// ============================================
// Load user notifications from database
async function loadNotifications() {
try {
if (!window.currentUser) {
updateNotificationBadge(0);
return;
}
const { data, error } = await supabaseAuth
.from('notifications')
.select('*')
.eq('user_id', window.currentUser.id)
.order('created_at', { ascending: false })
.limit(20);
if (error) throw error;
window.notifications = data || [];
const unreadCount = window.notifications.filter(n => !n.is_read).length;
updateNotificationBadge(unreadCount);
} catch (error) {
console.error('Error loading notifications:', error);
updateNotificationBadge(0);
}
}
// Update notification badge counts in UI
function updateNotificationBadge(count) {
const mainBadge = document.getElementById('notification-count');
const navBadge = document.getElementById('nav-notification-count');
[mainBadge, navBadge].forEach(badge => {
if (badge) {
badge.textContent = count > 99 ? '99+' : count;
badge.style.display = count > 0 ? 'flex' : 'none';
}
});
}
// Render notifications in the panel
function renderNotifications() {
const notificationsList = document.getElementById('notifications-list');
if (!notificationsList) return;
if (!window.currentUser) {
notificationsList.innerHTML = `
<div class="empty-notifications">
<i class="fas fa-bell-slash"></i>
<p>Sign in to see notifications</p>
</div>
`;
return;
}
if (!window.notifications || window.notifications.length === 0) {
notificationsList.innerHTML = `
<div class="empty-notifications">
<i class="fas fa-bell-slash"></i>
<p>No notifications yet</p>
</div>
`;
return;
}
notificationsList.innerHTML = window.notifications.map(notification => `
<div class="notification-item ${notification.is_read ? 'read' : 'unread'}" data-id="${notification.id}">
<div class="notification-icon">
<i class="${getNotificationIcon(notification.type)}"></i>
</div>
<div class="notification-content">
<h4>${escapeHtml(notification.title)}</h4>
<p>${escapeHtml(notification.message)}</p>
<span class="notification-time">${formatNotificationTime(notification.created_at)}</span>
</div>
${!notification.is_read ? '<div class="notification-dot"></div>' : ''}
</div>
`).join('');
}
// Get appropriate icon based on notification type
function getNotificationIcon(type) {
switch(type) {
case 'like': return 'fas fa-heart';
case 'comment': return 'fas fa-comment';
case 'follow': return 'fas fa-user-plus';
default: return 'fas fa-bell';
}
}
// Format notification time
function formatNotificationTime(timestamp) {
if (!timestamp) return 'Just now';
const diffMs = Date.now() - new Date(timestamp).getTime();
const diffMins = Math.floor(diffMs / 60000);
const diffHours = Math.floor(diffMs / 3600000);
const diffDays = Math.floor(diffMs / 86400000);
if (diffMins < 1) return 'Just now';
if (diffMins < 60) return `${diffMins}m ago`;
if (diffHours < 24) return `${diffHours}h ago`;
if (diffDays < 7) return `${diffDays}d ago`;
return new Date(timestamp).toLocaleDateString();
}
// ============================================
// CREATOR DATA FUNCTIONS
// ============================================
// Get URL parameters
function getUrlParam(name) {
const urlParams = new URLSearchParams(window.location.search);
return urlParams.get(name);
}
// Load creator data
async function loadCreatorData() {
try {
// Get creator ID from URL
window.creatorId = getUrlParam('id');
if (!window.creatorId) {
showToast('Creator ID not found in URL', 'error');
window.location.href = 'https://bantustreamconnect.com/content-library';
return;
}
// Load creator profile from user_profiles table
loadingText.textContent = 'Loading creator profile...';
const { data: profile, error: profileError } = await supabaseAuth
.from('user_profiles')
.select('*')
.eq('id', window.creatorId)
.maybeSingle();
if (profileError || !profile) {
showToast('Creator not found', 'error');
window.location.href = 'https://bantustreamconnect.com/content-library';
return;
}
window.creatorProfile = profile;
// Load creator content
loadingText.textContent = 'Loading creator content...';
const { data: content, error: contentError } = await supabaseAuth
.from('Content')
.select('*, user_profiles!user_id(*)')
.eq('user_id', window.creatorId)
.eq('status', 'published')
.order('created_at', { ascending: false })
.limit(50);
if (contentError) throw contentError;
// Get connector count
const { count: connectorCount, error: countError } = await supabaseAuth
.from('user_connections')
.select('*', { count: 'exact', head: true })
.eq('connected_id', window.creatorId)
.eq('connection_type', 'creator');
if (countError) throw countError;
window.connectorCount = connectorCount || 0;
// Check connection status
if (window.currentUser) {
const { data: connections } = await supabaseAuth
.from('user_connections')
.select('*')
.eq('connector_id', window.currentUser.id)
.eq('connected_id', window.creatorId)
.eq('connection_type', 'creator')
.limit(1);
window.isConnected = connections && connections.length > 0;
}
console.log('‚úÖ Creator data loaded:', {
profile: window.creatorProfile,
contentCount: content.length,
connectorCount: window.connectorCount,
isConnected: window.isConnected
});
// Update UI
updateCreatorUI();
updateContentUI(content);
} catch (error) {
console.error('‚ùå Error loading creator data:', error);
showToast('Failed to load creator channel', 'error');
}
}
// Update creator UI with real data from user_profiles table
function updateCreatorUI() {
if (!window.creatorProfile) return;
// Set creator info
document.getElementById('creator-name').textContent =
window.creatorProfile.full_name || window.creatorProfile.username || 'Creator';
document.getElementById('creator-username').textContent =
`@${window.creatorProfile.username || 'creator'}`;
document.getElementById('creator-bio').textContent =
window.creatorProfile.bio || 'Passionate content creator sharing authentic African stories and experiences.';
// Set avatar with perfect circle and initials fallback
const avatarContainer = document.getElementById('creator-avatar-container');
const avatarUrl = window.creatorProfile.avatar_url
? fixMediaUrl(window.creatorProfile.avatar_url)
: null;
const displayName = window.creatorProfile.full_name || window.creatorProfile.username || 'Creator';
const initials = getInitials(displayName);
if (avatarUrl) {
avatarContainer.innerHTML = `
<img src="${avatarUrl}" alt="${displayName}"
onerror="this.parentElement.innerHTML='<div class=\\'creator-initials\\'>${initials}</div>'">
`;
} else {
avatarContainer.innerHTML = `<div class="creator-initials">${initials}</div>`;
}
// Show founder badge if applicable
if (window.creatorProfile.is_founder) {
document.getElementById('founder-badge').style.display = 'block';
}
// Update stats
document.getElementById('videos-count').textContent = 
document.getElementById('uploads-count').textContent = '0'; // Will be updated by content
document.getElementById('connectors-count').textContent = formatNumber(window.connectorCount);
// Update connect button
updateConnectButton();
// Check if this is user's own channel
if (window.currentUser && window.currentUser.id === window.creatorId) {
const connectBtn = document.getElementById('connect-btn');
connectBtn.disabled = true;
connectBtn.innerHTML = '<i class="fas fa-user"></i> This is your channel';
connectBtn.classList.remove('connect-btn', 'connected-btn');
connectBtn.classList.add('share-btn');
}
}
// Update content UI
function updateContentUI(content) {
const liveStreamsGrid = document.getElementById('live-streams-grid');
const noLiveStreams = document.getElementById('no-live-streams');
const trendingGrid = document.getElementById('trending-grid');
const noTrending = document.getElementById('no-trending');
const newContentGrid = document.getElementById('new-content-grid');
const noContent = document.getElementById('no-content');
// Filter live streams
const liveStreams = content.filter(item => item.is_live);
const nonLiveContent = content.filter(item => !item.is_live);
// Update video/upload counts
document.getElementById('videos-count').textContent = content.length;
document.getElementById('uploads-count').textContent = content.length;
// Live streams
if (liveStreams.length === 0) {
liveStreamsGrid.style.display = 'none';
noLiveStreams.style.display = 'block';
} else {
liveStreamsGrid.style.display = 'grid';
noLiveStreams.style.display = 'none';
liveStreamsGrid.innerHTML = liveStreams.slice(0, 6).map(stream => {
const thumbnailUrl = stream.thumbnail_url
? fixMediaUrl(stream.thumbnail_url)
: 'https://images.unsplash.com/photo-1511379938547-c1f69419868d?w=400&h=225&fit=crop';
const creatorProfile = stream.user_profiles;
const creatorName = creatorProfile?.full_name || creatorProfile?.username || stream.creator || 'Creator';
const displayName = creatorProfile?.full_name || creatorProfile?.username || 'User';
const initials = getInitials(displayName);
const username = creatorProfile?.username || 'creator';
const viewers = Math.floor(Math.random() * 10000) + 1000;
// Build avatar HTML with initials fallback
let avatarHtml = '';
if (creatorProfile?.avatar_url) {
const avatarUrl = fixMediaUrl(creatorProfile.avatar_url);
avatarHtml = `<img src="${avatarUrl}" alt="${escapeHtml(displayName)}" onerror="this.parentElement.innerHTML='<div class=\\'creator-initials-small\\'>${initials}</div>'">`;
} else {
avatarHtml = `<div class="creator-initials-small">${initials}</div>`;
}
return `
<a href="content-detail.html?id=${stream.id}" class="content-card">
<div class="card-thumbnail">
<img src="${thumbnailUrl}"
alt="${escapeHtml(stream.title)}"
onerror="this.src='https://images.unsplash.com/photo-1511379938547-c1f69419868d?w=400&h=225&fit=crop'">
<div class="thumbnail-overlay"></div>
<div class="badge-live card-badge">
<i class="fas fa-circle"></i> LIVE
</div>
<div class="play-overlay">
<div class="play-icon">
<i class="fas fa-play"></i>
</div>
</div>
</div>
<div class="card-content">
<h3 class="card-title" title="${escapeHtml(stream.title)}">
${truncateText(escapeHtml(stream.title), 50)}
</h3>
<div class="creator-info">
<div class="creator-avatar-small">
${avatarHtml}
</div>
<div class="creator-name-small">@${escapeHtml(username)}</div>
</div>
<div class="card-meta">
<span><i class="fas fa-eye"></i> ${formatNumber(viewers)} watching</span>
<span>Live Now</span>
</div>
</div>
</a>
`;
}).join('');
}
// Trending content (top 8 by views)
const trendingContent = [...nonLiveContent].sort((a, b) => (b.views_count || 0) - (a.views_count || 0)).slice(0, 8);
if (trendingContent.length === 0) {
trendingGrid.style.display = 'none';
noTrending.style.display = 'block';
} else {
trendingGrid.style.display = 'grid';
noTrending.style.display = 'none';
trendingGrid.innerHTML = trendingContent.map(item => {
const thumbnailUrl = item.thumbnail_url
? fixMediaUrl(item.thumbnail_url)
: 'https://images.unsplash.com/photo-1574717024653-61fd2cf4d44d?w=400&h=225&fit=crop';
const creatorProfile = item.user_profiles;
const creatorName = creatorProfile?.full_name || creatorProfile?.username || item.creator || 'Creator';
const displayName = creatorProfile?.full_name || creatorProfile?.username || 'User';
const initials = getInitials(displayName);
const username = creatorProfile?.username || 'creator';
const views = item.views_count || Math.floor(Math.random() * 100000) + 1000;
// Build avatar HTML with initials fallback
let avatarHtml = '';
if (creatorProfile?.avatar_url) {
const avatarUrl = fixMediaUrl(creatorProfile.avatar_url);
avatarHtml = `<img src="${avatarUrl}" alt="${escapeHtml(displayName)}" onerror="this.parentElement.innerHTML='<div class=\\'creator-initials-small\\'>${initials}</div>'">`;
} else {
avatarHtml = `<div class="creator-initials-small">${initials}</div>`;
}
return `
<a href="content-detail.html?id=${item.id}" class="content-card">
<div class="card-thumbnail">
<img src="${thumbnailUrl}"
alt="${escapeHtml(item.title)}"
onerror="this.src='https://images.unsplash.com/photo-1574717024653-61fd2cf4d44d?w=400&h=225&fit=crop'">
<div class="thumbnail-overlay"></div>
<div class="badge-trending card-badge">
<i class="fas fa-fire"></i> TRENDING
</div>
<div class="play-overlay">
<div class="play-icon">
<i class="fas fa-play"></i>
</div>
</div>
</div>
<div class="card-content">
<h3 class="card-title" title="${escapeHtml(item.title)}">
${truncateText(escapeHtml(item.title), 50)}
</h3>
<div class="creator-info">
<div class="creator-avatar-small">
${avatarHtml}
</div>
<div class="creator-name-small">@${escapeHtml(username)}</div>
</div>
<div class="card-meta">
<span><i class="fas fa-eye"></i> ${formatNumber(views)}</span>
<span>${formatDate(item.created_at)}</span>
</div>
</div>
</a>
`;
}).join('');
}
// Latest uploads (most recent 8)
const latestContent = nonLiveContent.slice(0, 8);
if (latestContent.length === 0) {
newContentGrid.style.display = 'none';
noContent.style.display = 'block';
} else {
newContentGrid.style.display = 'grid';
noContent.style.display = 'none';
newContentGrid.innerHTML = latestContent.map(item => {
const thumbnailUrl = item.thumbnail_url
? fixMediaUrl(item.thumbnail_url)
: 'https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400&h=225&fit=crop';
const creatorProfile = item.user_profiles;
const creatorName = creatorProfile?.full_name || creatorProfile?.username || item.creator || 'Creator';
const displayName = creatorProfile?.full_name || creatorProfile?.username || 'User';
const initials = getInitials(displayName);
const username = creatorProfile?.username || 'creator';
const isNew = (new Date() - new Date(item.created_at)) < 7 * 24 * 60 * 60 * 1000;
// Build avatar HTML with initials fallback
let avatarHtml = '';
if (creatorProfile?.avatar_url) {
const avatarUrl = fixMediaUrl(creatorProfile.avatar_url);
avatarHtml = `<img src="${avatarUrl}" alt="${escapeHtml(displayName)}" onerror="this.parentElement.innerHTML='<div class=\\'creator-initials-small\\'>${initials}</div>'">`;
} else {
avatarHtml = `<div class="creator-initials-small">${initials}</div>`;
}
return `
<a href="content-detail.html?id=${item.id}" class="content-card">
<div class="card-thumbnail">
<img src="${thumbnailUrl}"
alt="${escapeHtml(item.title)}"
loading="lazy"
onerror="this.src='https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400&h=225&fit=crop'">
<div class="thumbnail-overlay"></div>
${isNew ? '<div class="badge-new card-badge"><i class="fas fa-gem"></i> NEW</div>' : ''}
<div class="play-overlay">
<div class="play-icon">
<i class="fas fa-play"></i>
</div>
</div>
</div>
<div class="card-content">
<h3 class="card-title" title="${escapeHtml(item.title)}">
${truncateText(escapeHtml(item.title), 50)}
</h3>
<div class="creator-info">
<div class="creator-avatar-small">
${avatarHtml}
</div>
<div class="creator-name-small">@${escapeHtml(username)}</div>
</div>
<div class="card-meta">
<span><i class="fas fa-eye"></i> ${formatNumber(item.views_count || 0)}</span>
<span>${item.media_type || 'video'}</span>
</div>
</div>
</a>
`;
}).join('');
}
}
// Update connect button state
function updateConnectButton() {
const connectBtn = document.getElementById('connect-btn');
const connectText = document.getElementById('connect-text');
if (!window.currentUser) {
// User not logged in
connectBtn.innerHTML = '<i class="fas fa-sign-in-alt"></i> Log in to Connect';
connectBtn.classList.remove('connected-btn');
connectBtn.classList.add('connect-btn');
connectBtn.onclick = handleLoginRequired;
return;
}
if (window.currentUser.id === window.creatorId) {
// User viewing own profile
connectBtn.disabled = true;
connectBtn.innerHTML = '<i class="fas fa-user"></i> This is your channel';
return;
}
if (window.isConnected) {
connectBtn.innerHTML = '<i class="fas fa-link"></i> Connected';
connectBtn.classList.remove('connect-btn');
connectBtn.classList.add('connected-btn');
connectBtn.onclick = handleDisconnect;
} else {
connectBtn.innerHTML = '<i class="fas fa-link"></i> Connect';
connectBtn.classList.remove('connected-btn');
connectBtn.classList.add('connect-btn');
connectBtn.onclick = handleConnect;
}
}
// Handle login required
function handleLoginRequired() {
showToast('Please log in to connect with creators', 'info');
window.location.href = `login.html?redirect=creator-channel.html?id=${window.creatorId}`;
}
// Handle connect
async function handleConnect() {
if (!window.currentUser) {
handleLoginRequired();
return;
}
if (window.currentUser.id === window.creatorId) {
showToast('You cannot connect to your own channel', 'info');
return;
}
try {
const { error } = await supabaseAuth
.from('user_connections')
.insert({
connector_id: window.currentUser.id,
connected_id: window.creatorId,
connection_type: 'creator',
created_at: new Date().toISOString()
});
if (error) throw error;
window.isConnected = true;
window.connectorCount++;
updateConnectButton();
document.getElementById('connectors-count').textContent = formatNumber(window.connectorCount);
showToast(`Connected with ${window.creatorProfile.full_name || window.creatorProfile.username}`, 'success');
} catch (error) {
console.error('Error connecting:', error);
showToast('Failed to connect', 'error');
}
}
// Handle disconnect
async function handleDisconnect() {
try {
const { error } = await supabaseAuth
.from('user_connections')
.delete()
.eq('connector_id', window.currentUser.id)
.eq('connected_id', window.creatorId)
.eq('connection_type', 'creator');
if (error) throw error;
window.isConnected = false;
window.connectorCount = Math.max(0, window.connectorCount - 1);
updateConnectButton();
document.getElementById('connectors-count').textContent = formatNumber(window.connectorCount);
showToast(`Disconnected from ${window.creatorProfile.full_name || window.creatorProfile.username}`, 'info');
} catch (error) {
console.error('Error disconnecting:', error);
showToast('Failed to disconnect', 'error');
}
}
// Handle share
function handleShare() {
if (!window.creatorProfile) return;
const creatorName = window.creatorProfile.full_name || window.creatorProfile.username || 'this creator';
const shareText = `Check out ${creatorName}'s channel on Bantu Stream Connect! Connect with amazing creators and discover exclusive content. üöÄ`;
const shareUrl = window.location.href;
if (navigator.share) {
// Use Web Share API if available
navigator.share({
title: `${creatorName}'s Channel`,
text: shareText,
url: shareUrl
});
} else {
// Fallback: Copy to clipboard
navigator.clipboard.writeText(`${shareText}\n${shareUrl}`)
.then(() => showToast('Link copied to clipboard!', 'success'))
.catch(() => showToast('Failed to copy link', 'error'));
}
}
// Show connectors modal
async function showConnectorsModal() {
try {
const { data: connections, error } = await supabaseAuth
.from('user_connections')
.select(`
connector_id,
user_profiles!inner(id, full_name, username, avatar_url)
`)
.eq('connected_id', window.creatorId)
.eq('connection_type', 'creator');
if (error) throw error;
const modalTitle = document.getElementById('modal-title');
const connectorsList = document.getElementById('connectors-list');
modalTitle.textContent = `Connectors (${connections.length})`;
if (connections.length === 0) {
connectorsList.innerHTML = '<div class="empty-state">No connectors yet</div>';
} else {
connectorsList.innerHTML = connections.map(conn => {
const profile = conn.user_profiles;
const avatarUrl = profile.avatar_url
? fixMediaUrl(profile.avatar_url)
: 'https://images.unsplash.com/photo-1633332755192-727a05c4013d?w=400&h=400&fit=crop';
const displayName = profile.full_name || profile.username || 'User';
const initials = getInitials(displayName);
return `
<div class="connector-item">
<div class="connector-avatar">
${avatarUrl ? `
<img src="${avatarUrl}" alt="${escapeHtml(displayName)}"
onerror="this.parentElement.innerHTML='<div style=\\'width:100%;height:100%;border-radius:50%;background:linear-gradient(135deg,#1D4ED8,#F59E0B);display:flex;align-items:center;justify-content:center;color:white;font-weight:bold;font-size:16px\\'>${initials}</div>'">
` : `
<div style="width:100%;height:100%;border-radius:50%;background:linear-gradient(135deg,#1D4ED8,#F59E0B);display:flex;align-items:center;justify-content:center;color:white;font-weight:bold;font-size:16px">${initials}</div>
`}
</div>
<div class="connector-info">
<div class="connector-name">${escapeHtml(profile.full_name || profile.username)}</div>
<div class="connector-username">@${escapeHtml(profile.username || 'user')}</div>
</div>
</div>
`;
}).join('');
}
document.getElementById('connectors-modal').classList.add('active');
} catch (error) {
console.error('Error loading connectors:', error);
showToast('Failed to load connectors', 'error');
}
}
// Setup event listeners
function setupEventListeners() {
// Profile button navigation
const profileBtn = document.getElementById('profile-btn');
if (profileBtn) {
profileBtn.addEventListener('click', async () => {
const { data: { session } } = await supabaseAuth.auth.getSession();
if (session) {
window.location.href = 'profile.html';
} else {
window.location.href = `login.html?redirect=${encodeURIComponent(window.location.href)}`;
}
});
}
// Search button
const searchBtn = document.getElementById('search-btn');
if (searchBtn) {
searchBtn.addEventListener('click', () => {
document.getElementById('search-modal').classList.add('active');
setTimeout(() => document.getElementById('search-input')?.focus(), 300);
});
}
// Close search modal
const closeSearchBtn = document.getElementById('close-search-btn');
if (closeSearchBtn) {
closeSearchBtn.addEventListener('click', () => {
document.getElementById('search-modal').classList.remove('active');
document.getElementById('search-input').value = '';
document.getElementById('search-results-grid').innerHTML = '';
});
}
// Close modal on background click
document.getElementById('search-modal').addEventListener('click', (e) => {
if (e.target === document.getElementById('search-modal')) {
document.getElementById('search-modal').classList.remove('active');
document.getElementById('search-input').value = '';
document.getElementById('search-results-grid').innerHTML = '';
}
});
// Share button
document.getElementById('share-btn').addEventListener('click', handleShare);
// Connectors stat card click
document.getElementById('connectors-stat-card').addEventListener('click', showConnectorsModal);
// Close connectors modal
document.getElementById('close-modal-btn').addEventListener('click', () => {
document.getElementById('connectors-modal').classList.remove('active');
});
// Close connectors modal on background click
document.getElementById('connectors-modal').addEventListener('click', (e) => {
if (e.target === document.getElementById('connectors-modal')) {
document.getElementById('connectors-modal').classList.remove('active');
}
});
// Notifications button
const notificationsBtn = document.getElementById('notifications-btn');
if (notificationsBtn) {
notificationsBtn.addEventListener('click', () => {
document.getElementById('notifications-panel').classList.add('active');
renderNotifications();
});
}
// Close notifications panel
const closeNotifications = document.getElementById('close-notifications');
if (closeNotifications) {
closeNotifications.addEventListener('click', () => {
document.getElementById('notifications-panel').classList.remove('active');
});
}
// Close notifications panel on background click
document.getElementById('notifications-panel').addEventListener('click', (e) => {
if (e.target === document.getElementById('notifications-panel')) {
document.getElementById('notifications-panel').classList.remove('active');
}
});
// Mark all notifications as read
const markAllRead = document.getElementById('mark-all-read');
if (markAllRead) {
markAllRead.addEventListener('click', async () => {
if (!window.currentUser) return;
try {
const { error } = await supabaseAuth
.from('notifications')
.update({ is_read: true })
.eq('user_id', window.currentUser.id)
.eq('is_read', false);
if (error) throw error;
window.notifications = window.notifications.map(n => ({ ...n, is_read: true }));
renderNotifications();
updateNotificationBadge(0);
showToast('All notifications marked as read', 'success');
} catch (error) {
console.error('Error marking all as read:', error);
showToast('Failed to mark notifications as read', 'error');
}
});
}
// Analytics button
const analyticsBtn = document.getElementById('analytics-btn');
if (analyticsBtn) {
analyticsBtn.addEventListener('click', async () => {
const { data: { session } } = await supabaseAuth.auth.getSession();
if (!session) {
showToast('Please sign in to view analytics', 'warning');
return;
}
document.getElementById('analytics-modal').classList.add('active');
// Load analytics data
document.getElementById('total-views').textContent = formatNumber(1250000);
document.getElementById('total-content').textContent = '125';
document.getElementById('active-creators').textContent = '45';
document.getElementById('engagement-rate').textContent = '78%';
});
}
// Close analytics modal
const closeAnalytics = document.getElementById('close-analytics');
if (closeAnalytics) {
closeAnalytics.addEventListener('click', () => {
document.getElementById('analytics-modal').classList.remove('active');
});
}
// Close analytics modal on background click
document.getElementById('analytics-modal').addEventListener('click', (e) => {
if (e.target === document.getElementById('analytics-modal')) {
document.getElementById('analytics-modal').classList.remove('active');
}
});
// Theme toggle
const themeToggle = document.getElementById('nav-theme-toggle');
const themeSelector = document.getElementById('theme-selector');
if (themeToggle && themeSelector) {
themeToggle.addEventListener('click', (e) => {
e.stopPropagation();
themeSelector.classList.toggle('active');
});
document.addEventListener('click', (e) => {
if (themeSelector.classList.contains('active') &&
!themeSelector.contains(e.target) &&
!themeToggle.contains(e.target)) {
themeSelector.classList.remove('active');
}
});
document.querySelectorAll('.theme-option').forEach(option => {
option.addEventListener('click', () => {
if (typeof window.applyTheme === 'function') {
window.applyTheme(option.dataset.theme);
}
themeSelector.classList.remove('active');
});
});
}
// Navigation buttons
document.getElementById('nav-home-btn')?.addEventListener('click', () => {
window.location.href = 'index.html';
});
document.getElementById('nav-create-btn')?.addEventListener('click', async () => {
const { data: { session } } = await supabaseAuth.auth.getSession();
if (session) {
window.location.href = 'creator-upload.html';
} else {
showToast('Please sign in to upload content', 'warning');
window.location.href = `login.html?redirect=creator-upload.html`;
}
});
document.getElementById('nav-dashboard-btn')?.addEventListener('click', async () => {
const { data: { session } } = await supabaseAuth.auth.getSession();
if (session) {
window.location.href = 'creator-dashboard.html';
} else {
showToast('Please sign in to access dashboard', 'warning');
window.location.href = `login.html?redirect=creator-dashboard.html`;
}
});
document.getElementById('nav-notifications-btn')?.addEventListener('click', () => {
document.getElementById('notifications-panel').classList.add('active');
renderNotifications();
});
// Back to top button
const backToTopBtn = document.getElementById('backToTopBtn');
if (backToTopBtn) {
backToTopBtn.addEventListener('click', () => {
window.scrollTo({ top: 0, behavior: 'smooth' });
});
window.addEventListener('scroll', () => {
backToTopBtn.style.display = window.pageYOffset > 300 ? 'flex' : 'none';
});
}
}
// Initialize creator channel
async function initializeCreatorChannel() {
try {
// Show loading screen
document.getElementById('loading').style.display = 'flex';
document.getElementById('app').style.display = 'none';
// Initialize theme
if (typeof window.initTheme === 'function') {
window.initTheme();
}
// Check authentication
await checkAuth();
// Load creator data
await loadCreatorData();
// Setup event listeners
setupEventListeners();
// Hide loading with smooth transition
setTimeout(() => {
document.getElementById('loading').style.display = 'none';
document.getElementById('app').style.display = 'block';
// Trigger animations
document.querySelectorAll('.content-card').forEach((card, index) => {
setTimeout(() => {
card.style.opacity = '1';
card.style.transform = 'translateY(0)';
}, 300 + (index * 50));
});
}, 500);
console.log('‚úÖ Creator channel initialized successfully');
} catch (error) {
console.error('‚ùå Error initializing creator channel:', error);
showToast('Failed to initialize creator channel', 'error');
setTimeout(() => {
document.getElementById('loading').style.display = 'none';
document.getElementById('app').style.display = 'block';
}, 1000);
}
}
// Initialize the app
await initializeCreatorChannel();
// Auth state change listener
supabaseAuth.auth.onAuthStateChange((event, session) => {
console.log('Auth state changed:', event);
if (event === 'SIGNED_IN') {
window.currentUser = session.user;
loadUserProfile();
loadNotifications();
showToast('Welcome back!', 'success');
// Re-check connection status
if (window.creatorId) {
supabaseAuth
.from('user_connections')
.select('*')
.eq('connector_id', session.user.id)
.eq('connected_id', window.creatorId)
.eq('connection_type', 'creator')
.limit(1)
.then(({ data }) => {
window.isConnected = data && data.length > 0;
updateConnectButton();
});
}
} else if (event === 'SIGNED_OUT') {
window.currentUser = null;
updateProfileUI(null);
updateNotificationBadge(0);
window.notifications = [];
renderNotifications();
showToast('You have been signed out', 'info');
window.isConnected = false;
updateConnectButton();
}
});
});
</script>
</body>
</html>
