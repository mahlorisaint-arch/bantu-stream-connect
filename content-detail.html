<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
  <title>Bantu Stream Connect - Content Detail</title>
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Orbitron:wght@400;500;600;700&display=swap" rel="stylesheet">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Chart.js for Analytics -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Supabase JS SDK -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <!-- Base Styles -->
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/components.css">
  <link rel="stylesheet" href="css/content-detail.css">
</head>
<body>
  <!-- Loading Screen -->
  <div id="loading" class="loading-screen">
    <div class="spinner"></div>
    <div id="loading-text">Loading content details...</div>
  </div>
  
  <!-- Animated Background -->
  <div class="animated-bg">
    <div class="glow-cycle glow-1"></div>
    <div class="glow-cycle glow-2"></div>
    <div class="glow-cycle glow-3"></div>
    <div class="glow-cycle glow-4"></div>
  </div>

  <!-- Main App (hidden until loaded) -->
  <div id="app" style="display: none;">
    <!-- Header -->
    <header class="header">
      <div class="logo" onclick="window.location.href='https://bantustreamconnect.com/'">
        <div class="logo-icon">
          <img src="assets/icon/bantu_stream_connect_icon.png" alt="Bantu Stream Connect Logo">
        </div>
        <div class="logo-text">BANTU STREAM CONNECT</div>
      </div>
      <div class="header-actions">
        <!-- Analytics Button -->
        <button id="analytics-btn" class="icon-btn" title="Analytics">
          <i class="fas fa-chart-line"></i>
        </button>
        <!-- Search Button -->
        <button id="search-btn" class="icon-btn search-btn" title="Search">
          <i class="fas fa-search"></i>
        </button>
        <!-- Notifications Button -->
        <button id="notifications-btn" class="icon-btn" title="Notifications">
          <i class="fas fa-bell"></i>
          <span class="notification-badge" id="notification-count" style="display: none;">0</span>
        </button>
        <!-- Profile Button -->
        <button id="profile-btn" class="profile-btn" title="Profile">
          <div class="profile-placeholder" id="userProfilePlaceholder">
            <i class="fas fa-user"></i>
          </div>
        </button>
      </div>
    </header>

    <!-- Main Content -->
    <main class="container">
      <!-- Hero Section -->
      <section class="content-hero">
        <div class="hero-poster" id="heroPoster">
          <div class="poster-placeholder" id="posterPlaceholder">
            <i class="fas fa-film"></i>
          </div>
        </div>
        <div class="hero-info">
          <h1 id="contentTitle">Loading Content...</h1>
          <div class="hero-meta">
            <div class="meta-item">
              <i class="fas fa-user"></i>
              <span id="creatorName">Creator</span>
            </div>
            <div class="meta-item">
              <i class="fas fa-eye"></i>
              <span id="viewsCount">0 views</span>
            </div>
            <div class="meta-item">
              <i class="fas fa-clock"></i>
              <span id="durationText">0m 0s</span>
            </div>
            <div class="meta-item">
              <i class="fas fa-calendar"></i>
              <span id="uploadDate">--</span>
            </div>
          </div>
          <div class="hero-description" id="contentDescriptionShort">
            Loading description...
          </div>
          <div class="hero-actions">
            <button id="playBtn" class="btn btn-primary">
              <i class="fas fa-play"></i>
              <span>Play Now</span>
            </button>
            <button id="favoriteBtn" class="btn btn-secondary">
              <i class="far fa-heart"></i>
              <span>Favorite</span>
            </button>
            <button id="shareBtn" class="btn btn-secondary">
              <i class="fas fa-share"></i>
              <span>Share</span>
            </button>
          </div>
        </div>
      </section>

      <!-- Inline Video Player -->
      <div class="inline-player" id="inlinePlayer" style="display: none;">
        <div class="player-header">
          <h3 id="playerTitle">Now Playing</h3>
          <button class="icon-btn close-player" id="closePlayerBtn" title="Close Player">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="video-container">
          <video id="inlineVideoPlayer" controls playsinline>
            Your browser does not support the video tag.
          </video>
        </div>
        <div class="player-actions">
          <div class="player-controls">
            <button class="control-btn" id="pipBtn" title="Picture-in-Picture">
              <i class="fas fa-images"></i>
            </button>
            <button class="control-btn" id="fullscreenBtn" title="Fullscreen">
              <i class="fas fa-expand"></i>
            </button>
          </div>
          <button id="connectBtn" class="btn connect-btn">
            <i class="fas fa-user-plus"></i>
            <span>Connect</span>
          </button>
        </div>
      </div>

      <!-- Creator Section -->
      <section class="creator-section">
        <div class="creator-info">
          <div class="creator-avatar" id="creatorAvatar">
            <i class="fas fa-user"></i>
          </div>
          <div class="creator-details">
            <h3 id="creatorDisplayName">Creator Name</h3>
            <p>Verified Creator • Joined 2024</p>
          </div>
          <button id="connectCreatorBtn" class="connect-btn">
            <i class="fas fa-user-plus"></i>
            <span>Connect</span>
          </button>
        </div>
      </section>

      <!-- Stats Grid -->
      <section class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-eye"></i>
          </div>
          <div class="stat-content">
            <h4>Total Views</h4>
            <p id="viewsCountFull">0</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-heart"></i>
          </div>
          <div class="stat-content">
            <h4>Likes</h4>
            <p id="likesCount">0</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-clock"></i>
          </div>
          <div class="stat-content">
            <h4>Duration</h4>
            <p id="contentDurationFull">0m 0s</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-tag"></i>
          </div>
          <div class="stat-content">
            <h4>Genre</h4>
            <p id="contentGenre">--</p>
          </div>
        </div>
      </section>

      <!-- Description Section -->
      <section class="description-section">
        <h2>Description</h2>
        <div class="description-content" id="contentDescriptionFull">
          Loading full description...
        </div>
      </section>

      <!-- Comments Section -->
      <section class="comments-section">
        <div class="section-header">
          <h2 class="section-title">Comments <span id="commentsCount">(0)</span></h2>
          <button id="refreshCommentsBtn" class="refresh-btn">
            <i class="fas fa-redo"></i> Refresh
          </button>
        </div>
        <div class="add-comment">
          <div class="comment-avatar" id="userCommentAvatar">
            <i class="fas fa-user"></i>
          </div>
          <div class="comment-input-container">
            <textarea id="commentInput" placeholder="Sign in to add a comment..." disabled></textarea>
            <button id="sendCommentBtn" class="send-comment-btn">
              <i class="fas fa-paper-plane"></i>
            </button>
          </div>
        </div>
        <div class="comments-list" id="commentsList">
          <div class="no-comments" id="noComments">
            <i class="fas fa-comment-slash"></i>
            <p>No comments yet. Be the first to comment!</p>
          </div>
        </div>
      </section>

      <!-- Related Content -->
      <section class="related-section">
        <div class="section-header">
          <h2 class="section-title">Related Content</h2>
        </div>
        <div class="content-grid" id="relatedGrid">
          <!-- Related content will be loaded here -->
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <p>Bantu Stream Connect © 2025 • Built in South Africa</p>
      <div class="footer-links">
        <a href="privacy-policy.html">Privacy Policy</a>
        <a href="terms-of-service.html">Terms of Service</a>
        <a href="support.html">Support</a>
      </div>
    </footer>

    <!-- Global Navigation Button -->
    <div class="navigation-button-container">
      <div class="navigation-button">
        <div class="nav-icon" onclick="window.location.href='https://bantustreamconnect.com/'" title="Home">
          <i class="fas fa-home"></i>
        </div>
        <div class="nav-icon" id="nav-theme-toggle" title="Change Theme">
          <i class="fas fa-palette"></i>
        </div>
        <div class="nav-icon" onclick="window.location.href='creator-upload.html'" title="Create Content">
          <i class="fas fa-plus-circle"></i>
        </div>
        <div class="nav-icon" onclick="window.location.href='creator-dashboard.html'" title="Creator Dashboard">
          <i class="fas fa-tachometer-alt"></i>
        </div>
        <div class="nav-icon" id="nav-notifications-btn" title="Notifications">
          <i class="fas fa-bell"></i>
          <span class="nav-notification-badge" id="nav-notification-count" style="display: none;">0</span>
        </div>
      </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container"></div>
    
    <!-- Back to Top Button -->
    <button id="backToTopBtn" class="back-to-top">
      <i class="fas fa-arrow-up"></i>
    </button>

    <!-- =================================================================== -->
    <!-- NEW MODALS & PANELS (Added as per updates)                         -->
    <!-- =================================================================== -->

    <!-- Analytics Modal -->
    <div id="analytics-modal" class="analytics-modal">
      <div class="analytics-content">
        <div class="analytics-header">
          <h2>Content Analytics</h2>
          <button id="close-analytics" class="close-search-btn">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="analytics-body">
          <div class="analytics-grid">
            <div class="analytics-card">
              <h3>Total Views</h3>
              <div class="analytics-value" id="content-total-views">0</div>
              <div class="analytics-trend" id="views-trend">+0%</div>
            </div>
            <div class="analytics-card">
              <h3>Avg. Watch Time</h3>
              <div class="analytics-value" id="avg-watch-time">0m</div>
              <div class="analytics-trend" id="watch-time-trend">+0%</div>
            </div>
            <div class="analytics-card">
              <h3>Engagement Rate</h3>
              <div class="analytics-value" id="engagement-rate">0%</div>
              <div class="analytics-trend" id="engagement-trend">+0%</div>
            </div>
            <div class="analytics-card">
              <h3>Comments</h3>
              <div class="analytics-value" id="total-comments">0</div>
              <div class="analytics-trend" id="comments-trend">+0%</div>
            </div>
          </div>
          <div class="charts-container">
            <canvas id="content-engagement-chart"></canvas>
          </div>
        </div>
      </div>
    </div>

    <!-- Search Modal -->
    <div id="search-modal" class="search-modal">
      <div class="search-modal-header">
        <div class="search-input-container">
          <i class="search-icon fas fa-search"></i>
          <input type="text" id="search-input" class="search-input" placeholder="Search content, creators, or categories..." autocomplete="off">
        </div>
        <button id="close-search-btn" class="close-search-btn">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="search-filters">
        <div class="filter-group">
          <label class="filter-label">Category</label>
          <select id="category-filter" class="filter-select">
            <option value="">All Categories</option>
            <option value="Music">Music</option>
            <option value="STEM">STEM</option>
            <option value="Culture">Culture</option>
            <option value="News">News</option>
            <option value="Sports">Sports</option>
          </select>
        </div>
        <div class="filter-group">
          <label class="filter-label">Sort By</label>
          <select id="sort-filter" class="filter-select">
            <option value="newest">Newest First</option>
            <option value="popular">Most Popular</option>
            <option value="trending">Trending</option>
          </select>
        </div>
      </div>
      <div id="search-results" class="search-results">
        <div id="search-results-grid" class="search-results-grid">
          <!-- Results loaded here -->
        </div>
      </div>
    </div>

    <!-- Notifications Panel -->
    <div id="notifications-panel" class="notifications-panel">
      <div class="notifications-header">
        <h2>Notifications</h2>
        <button id="close-notifications" class="icon-btn">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="notifications-list" id="notifications-list">
        <!-- Notifications loaded here -->
      </div>
      <div class="notifications-footer">
        <button id="mark-all-read" class="text-btn">Mark all as read</button>
        <button id="notification-settings" class="text-btn">Settings</button>
      </div>
    </div>

    <!-- Theme Selector -->
    <div id="theme-selector" class="theme-selector">
      <button class="theme-option" data-theme="dark">
        <i class="fas fa-moon"></i> Dark
      </button>
      <button class="theme-option" data-theme="light">
        <i class="fas fa-sun"></i> Light
      </button>
      <button class="theme-option" data-theme="high-contrast">
        <i class="fas fa-eye"></i> High Contrast
      </button>
    </div>

  </div> <!-- Closing div for #app -->

  <!-- Initialize Supabase Client -->
  <script>
    const SUPABASE_URL = 'https://ydnxqnbjoshvxteevemc.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlkbnhxbmJqb3Nodnh0ZWV2ZW1jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc2MzI0OTMsImV4cCI6MjA3MzIwODQ5M30.NlaCCnLPSz1mM7AFeSlfZQ78kYEKUMh_Fi-7P_ccs_U';
    window.supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
  </script>
  
  <!-- Utility Scripts -->
  <script src="js/state-manager.js"></script>
  <script src="js/supabase-helper.js"></script>
  <script src="js/auth-helper.js"></script>
  <script src="js/security.js"></script>
  <script src="js/analytics.js"></script>
  <script src="js/video-player.js"></script>
  <script src="js/virtual-scroll.js"></script>
  
  <!-- Main Content Detail Script -->
  <script src="js/content-detail.js"></script>
</body>
</html>
