<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
  <title>Bantu Stream Connect - Content Detail</title>
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Orbitron:wght@400;500;600;700&display=swap" rel="stylesheet">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Chart.js for Analytics -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Supabase JS SDK -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <!-- Base Styles -->
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/components.css">
  <link rel="stylesheet" href="css/content-detail.css">
  <!-- PHASE 1 FIX: New Video Player CSS -->
  <link rel="stylesheet" href="css/video-player.css">
</head>
<body>
  <!-- Loading Screen -->
  <div id="loading" class="loading-screen">
    <div class="spinner"></div>
    <div id="loading-text">Loading content details...</div>
  </div>
  
  <!-- Animated Background -->
  <div class="animated-bg">
    <div class="glow-cycle glow-1"></div>
    <div class="glow-cycle glow-2"></div>
    <div class="glow-cycle glow-3"></div>
    <div class="glow-cycle glow-4"></div>
  </div>

  <!-- Main App (hidden until loaded) -->
  <div id="app" style="display: none;">
    <!-- Header -->
    <header class="header">
      <div class="logo" onclick="window.location.href='https://bantustreamconnect.com/'">
        <div class="logo-icon">
          <img src="assets/icon/bantu_stream_connect_icon.png" alt="Bantu Stream Connect Logo">
        </div>
        <div class="logo-text">BANTU STREAM CONNECT</div>
      </div>
      <div class="header-actions">
        <!-- Analytics Button -->
        <button id="analytics-btn" class="icon-btn" title="Analytics">
          <i class="fas fa-chart-line"></i>
        </button>
        <!-- Search Button -->
        <button id="search-btn" class="icon-btn search-btn" title="Search">
          <i class="fas fa-search"></i>
        </button>
        <!-- Notifications Button -->
        <button id="notifications-btn" class="icon-btn" title="Notifications">
          <i class="fas fa-bell"></i>
          <span class="notification-badge" id="notification-count" style="display: none;">0</span>
        </button>
        <!-- Profile Button -->
        <button id="profile-btn" class="profile-btn" title="Profile">
          <div class="profile-placeholder" id="userProfilePlaceholder">
            <i class="fas fa-user"></i>
          </div>
        </button>
      </div>
    </header>

    <!-- Main Content -->
    <main class="container">
      <!-- Hero Section -->
      <section class="content-hero">
        <div class="hero-poster" id="heroPoster">
          <div class="poster-placeholder" id="posterPlaceholder">
            <i class="fas fa-film"></i>
          </div>
        </div>
        <div class="hero-info">
          <h1 id="contentTitle">Loading Content...</h1>
          <div class="hero-meta">
            <div class="meta-item">
              <i class="fas fa-user"></i>
              <span id="creatorName">Creator</span>
            </div>
            <div class="meta-item">
              <i class="fas fa-eye"></i>
              <span id="viewsCount">0 views</span>
            </div>
            <div class="meta-item">
              <i class="fas fa-clock"></i>
              <span id="durationText">0m 0s</span>
            </div>
            <div class="meta-item">
              <i class="fas fa-calendar"></i>
              <span id="uploadDate">--</span>
            </div>
          </div>
          <div class="hero-description" id="contentDescriptionShort">
            Loading description...
          </div>
          <div class="hero-actions">
            <!-- Resume button will be added dynamically here -->
            <button class="btn btn-primary" id="playBtn">
              <i class="fas fa-play"></i>
              <span>Play Now</span>
            </button>
            <button class="btn btn-secondary" id="likeBtn">
              <i class="far fa-heart"></i>
              <span>Like</span>
            </button>
            <button class="btn btn-secondary" id="favoriteBtn">
              <i class="far fa-heart"></i>
              <span>Favorite</span>
            </button>
            <button class="btn btn-secondary" id="shareBtn">
              <i class="fas fa-share"></i>
              <span>Share</span>
            </button>
          </div>
        </div>
      </section>

      <!-- BANTU STREAM CONNECT BRANDED VIDEO PLAYER - PHASE 1 FIXED -->
      <div class="inline-player" id="inlinePlayer" style="display: none;">
        <div class="player-header">
          <h3 id="playerTitle">Now Playing</h3>
          <button class="icon-btn close-player" id="closePlayerBtn" title="Close Player">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="video-container" id="bantuVideoContainer">
          <!-- Video element WITHOUT any duplicate controls - Phase 1 Fix -->
          <video id="inlineVideoPlayer" playsinline webkit-playsinline>
            Your browser does not support the video tag.
          </video>
          
          <!-- Bantu Branded Play/Pause/Loading Buttons -->
          <div class="play-pause-toggle play-state bantu-play-button">
            <svg width="80" height="80" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg">
              <!-- SVG Filters for Neon Glow Effects -->
              <defs>
                <!-- Africa Outline Glow Filter -->
                <filter id="africaGlow" x="-50%" y="-50%" width="200%" height="200%">
                  <!-- Inner Glow -->
                  <feGaussianBlur in="SourceAlpha" stdDeviation="3" result="blur1"/>
                  <feFlood flood-color="#42F2FF" flood-opacity="0.4" result="glowColor1"/>
                  <feComposite in="glowColor1" in2="blur1" operator="in" result="innerGlow"/>
                  
                  <!-- Outer Glow -->
                  <feGaussianBlur in="SourceAlpha" stdDeviation="9" result="blur2"/>
                  <feFlood flood-color="#18E1FF" flood-opacity="0.25" result="glowColor2"/>
                  <feComposite in="glowColor2" in2="blur2" operator="in" result="outerGlow"/>
                  
                  <!-- Merge glows with original -->
                  <feMerge>
                    <feMergeNode in="outerGlow"/>
                    <feMergeNode in="innerGlow"/>
                    <feMergeNode in="SourceGraphic"/>
                  </feMerge>
                </filter>
                
                <!-- Play Triangle Glow Filter -->
                <filter id="triangleGlow" x="-50%" y="-50%" width="200%" height="200%">
                  <!-- Stronger inner glow for hierarchy -->
                  <feGaussianBlur in="SourceAlpha" stdDeviation="4" result="blur1"/>
                  <feFlood flood-color="#B6FFFB" flood-opacity="0.5" result="glowColor1"/>
                  <feComposite in="glowColor1" in2="blur1" operator="in" result="innerGlow"/>
                  
                  <!-- Outer glow -->
                  <feGaussianBlur in="SourceAlpha" stdDeviation="10" result="blur2"/>
                  <feFlood flood-color="#8CFFF6" flood-opacity="0.3" result="glowColor2"/>
                  <feComposite in="glowColor2" in2="blur2" operator="in" result="outerGlow"/>
                  
                  <!-- Merge -->
                  <feMerge>
                    <feMergeNode in="outerGlow"/>
                    <feMergeNode in="innerGlow"/>
                    <feMergeNode in="SourceGraphic"/>
                  </feMerge>
                </filter>
                
                <!-- Container Glow Filter -->
                <filter id="containerGlow" x="-30%" y="-30%" width="160%" height="160%">
                  <feGaussianBlur in="SourceAlpha" stdDeviation="6" result="blur"/>
                  <feFlood flood-color="#18E1FF" flood-opacity="0.2" result="glowColor"/>
                  <feComposite in="glowColor" in2="blur" operator="in" result="glow"/>
                  <feMerge>
                    <feMergeNode in="glow"/>
                    <feMergeNode in="SourceGraphic"/>
                  </feMerge>
                </filter>
              </defs>
              
              <!-- Deep Navy Background -->
              <rect width="120" height="120" rx="36" ry="36" fill="#050B1E"/>
              
              <!-- Container Outline with Glow -->
              <rect x="4" y="4" width="112" height="112" rx="32" ry="32" 
                    fill="none" 
                    stroke="#18E1FF" 
                    stroke-width="3.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    filter="url(#containerGlow)"/>
              
              <!-- Africa Continent Outline - Stylized -->
              <path d="M 60 28
                       C 58 28, 55 30, 53 32
                       L 48 38, 45 42, 43 46
                       C 42 48, 41 50, 41 52
                       L 41 58, 42 62, 44 66
                       C 45 68, 47 70, 49 71
                       L 52 73, 55 74, 58 75
                       C 60 75, 62 75, 64 74
                       L 67 73, 70 71, 72 69
                       C 74 67, 75 65, 76 63
                       L 77 60, 78 57, 78 54
                       C 78 52, 77 50, 76 48
                       L 74 44, 72 41, 70 38
                       C 68 36, 66 34, 64 33
                       L 62 31, 61 30, 60 28 Z
                       
                       M 65 45
                       C 66 46, 67 47, 68 48
                       L 69 50, 70 52, 70 54
                       C 70 55, 69 56, 68 57
                       L 67 58, 66 59, 65 60
                       C 64 60, 63 60, 62 59
                       L 61 58, 60 57, 59 56
                       C 58 55, 58 54, 58 53
                       L 59 51, 60 49, 62 47
                       C 63 46, 64 45, 65 45 Z"
                    fill="none"
                    stroke="#18E1FF"
                    stroke-width="3"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    filter="url(#africaGlow)"/>
              
              <!-- Signal Lines (3 parallel lines extending right) -->
              <line x1="68" y1="48" x2="82" y2="48" 
                    stroke="#18E1FF" 
                    stroke-width="2" 
                    stroke-linecap="round"
                    opacity="0.85"
                    filter="url(#africaGlow)"/>
              
              <line x1="68" y1="52" x2="80" y2="52" 
                    stroke="#18E1FF" 
                    stroke-width="2" 
                    stroke-linecap="round"
                    opacity="0.85"
                    filter="url(#africaGlow)"/>
              
              <line x1="68" y1="56" x2="78" y2="56" 
                    stroke="#18E1FF" 
                    stroke-width="2" 
                    stroke-linecap="round"
                    opacity="0.85"
                    filter="url(#africaGlow)"/>
              
              <!-- Play Triangle (Rounded corners) -->
              <path d="M 50 45
                       L 70 54
                       L 50 63
                       Z"
                    fill="#8CFFF6"
                    filter="url(#triangleGlow)"/>
            </svg>
          </div>
          
          <!-- Pause State -->
          <div class="play-pause-toggle pause-state bantu-pause-button">
            <svg width="80" height="80" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg">
              <!-- SVG Filters for Neon Glow Effects -->
              <defs>
                <!-- Africa Outline Glow Filter -->
                <filter id="africaGlowPause" x="-50%" y="-50%" width="200%" height="200%">
                  <feGaussianBlur in="SourceAlpha" stdDeviation="3" result="blur1"/>
                  <feFlood flood-color="#42F2FF" flood-opacity="0.4" result="glowColor1"/>
                  <feComposite in="glowColor1" in2="blur1" operator="in" result="innerGlow"/>
                  <feGaussianBlur in="SourceAlpha" stdDeviation="9" result="blur2"/>
                  <feFlood flood-color="#18E1FF" flood-opacity="0.25" result="glowColor2"/>
                  <feComposite in="glowColor2" in2="blur2" operator="in" result="outerGlow"/>
                  <feMerge>
                    <feMergeNode in="outerGlow"/>
                    <feMergeNode in="innerGlow"/>
                    <feMergeNode in="SourceGraphic"/>
                  </feMerge>
                </filter>
                
                <!-- Pause Bars Glow Filter -->
                <filter id="pauseGlow" x="-50%" y="-50%" width="200%" height="200%">
                  <feGaussianBlur in="SourceAlpha" stdDeviation="4" result="blur1"/>
                  <feFlood flood-color="#B6FFFB" flood-opacity="0.5" result="glowColor1"/>
                  <feComposite in="glowColor1" in2="blur1" operator="in" result="innerGlow"/>
                  <feGaussianBlur in="SourceAlpha" stdDeviation="10" result="blur2"/>
                  <feFlood flood-color="#8CFFF6" flood-opacity="0.3" result="glowColor2"/>
                  <feComposite in="glowColor2" in2="blur2" operator="in" result="outerGlow"/>
                  <feMerge>
                    <feMergeNode in="outerGlow"/>
                    <feMergeNode in="innerGlow"/>
                    <feMergeNode in="SourceGraphic"/>
                  </feMerge>
                </filter>
                
                <!-- Container Glow Filter -->
                <filter id="containerGlowPause" x="-30%" y="-30%" width="160%" height="160%">
                  <feGaussianBlur in="SourceAlpha" stdDeviation="6" result="blur"/>
                  <feFlood flood-color="#18E1FF" flood-opacity="0.2" result="glowColor"/>
                  <feComposite in="glowColor" in2="blur" operator="in" result="glow"/>
                  <feMerge>
                    <feMergeNode in="glow"/>
                    <feMergeNode in="SourceGraphic"/>
                  </feMerge>
                </filter>
              </defs>
              
              <!-- Deep Navy Background -->
              <rect width="120" height="120" rx="36" ry="36" fill="#050B1E"/>
              
              <!-- Container Outline with Glow -->
              <rect x="4" y="4" width="112" height="112" rx="32" ry="32" 
                    fill="none" 
                    stroke="#18E1FF" 
                    stroke-width="3.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    filter="url(#containerGlowPause)"/>
              
              <!-- Africa Continent Outline - Stylized -->
              <path d="M 60 28
                       C 58 28, 55 30, 53 32
                       L 48 38, 45 42, 43 46
                       C 42 48, 41 50, 41 52
                       L 41 58, 42 62, 44 66
                       C 45 68, 47 70, 49 71
                       L 52 73, 55 74, 58 75
                       C 60 75, 62 75, 64 74
                       L 67 73, 70 71, 72 69
                       C 74 67, 75 65, 76 63
                       L 77 60, 78 57, 78 54
                       C 78 52, 77 50, 76 48
                       L 74 44, 72 41, 70 38
                       C 68 36, 66 34, 64 33
                       L 62 31, 61 30, 60 28 Z
                       
                       M 65 45
                       C 66 46, 67 47, 68 48
                       L 69 50, 70 52, 70 54
                       C 70 55, 69 56, 68 57
                       L 67 58, 66 59, 65 60
                       C 64 60, 63 60, 62 59
                       L 61 58, 60 57, 59 56
                       C 58 55, 58 54, 58 53
                       L 59 51, 60 49, 62 47
                       C 63 46, 64 45, 65 45 Z"
                    fill="none"
                    stroke="#18E1FF"
                    stroke-width="3"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    filter="url(#africaGlowPause)"/>
              
              <!-- Pause Bars (Two vertical bars) -->
              <rect x="50" y="42" width="8" height="36" 
                    rx="2" ry="2"
                    fill="#8CFFF6"
                    filter="url(#pauseGlow)"/>
              
              <rect x="62" y="42" width="8" height="36" 
                    rx="2" ry="2"
                    fill="#8CFFF6"
                    filter="url(#pauseGlow)"/>
            </svg>
          </div>
          
          <!-- Loading State -->
          <div class="play-pause-toggle loading-state bantu-loading-button">
            <svg width="80" height="80" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg">
              <!-- SVG Filters for Pulsing Glow -->
              <defs>
                <!-- Pulsing Glow Filter -->
                <filter id="pulseGlow" x="-50%" y="-50%" width="200%" height="200%">
                  <feGaussianBlur in="SourceAlpha" stdDeviation="6" result="blur1"/>
                  <feFlood flood-color="#B6FFFB" flood-opacity="0.6" result="glowColor1"/>
                  <feComposite in="glowColor1" in2="blur1" operator="in" result="innerGlow"/>
                  <feGaussianBlur in="SourceAlpha" stdDeviation="12" result="blur2"/>
                  <feFlood flood-color="#8CFFF6" flood-opacity="0.4" result="glowColor2"/>
                  <feComposite in="glowColor2" in2="blur2" operator="in" result="outerGlow"/>
                  <feMerge>
                    <feMergeNode in="outerGlow"/>
                    <feMergeNode in="innerGlow"/>
                    <feMergeNode in="SourceGraphic"/>
                  </feMerge>
                </filter>
                
                <!-- Africa Outline Glow Filter -->
                <filter id="africaGlowLoad" x="-50%" y="-50%" width="200%" height="200%">
                  <feGaussianBlur in="SourceAlpha" stdDeviation="3" result="blur1"/>
                  <feFlood flood-color="#42F2FF" flood-opacity="0.4" result="glowColor1"/>
                  <feComposite in="glowColor1" in2="blur1" operator="in" result="innerGlow"/>
                  <feGaussianBlur in="SourceAlpha" stdDeviation="8" result="blur2"/>
                  <feFlood flood-color="#18E1FF" flood-opacity="0.25" result="glowColor2"/>
                  <feComposite in="glowColor2" in2="blur2" operator="in" result="outerGlow"/>
                  <feMerge>
                    <feMergeNode in="outerGlow"/>
                    <feMergeNode in="innerGlow"/>
                    <feMergeNode in="SourceGraphic"/>
                  </feMerge>
                </filter>
              </defs>
              
              <!-- Deep Navy Background -->
              <rect width="120" height="120" rx="36" ry="36" fill="#050B1E"/>
              
              <!-- Container Outline with Glow -->
              <rect x="4" y="4" width="112" height="112" rx="32" ry="32" 
                    fill="none" 
                    stroke="#18E1FF" 
                    stroke-width="3.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    filter="url(#africaGlowLoad)"/>
              
              <!-- Africa Continent Outline - Stylized -->
              <path d="M 60 28
                       C 58 28, 55 30, 53 32
                       L 48 38, 45 42, 43 46
                       C 42 48, 41 50, 41 52
                       L 41 58, 42 62, 44 66
                       C 45 68, 47 70, 49 71
                       L 52 73, 55 74, 58 75
                       C 60 75, 62 75, 64 74
                       L 67 73, 70 71, 72 69
                       C 74 67, 75 65, 76 63
                       L 77 60, 78 57, 78 54
                       C 78 52, 77 50, 76 48
                       L 74 44, 72 41, 70 38
                       C 68 36, 66 34, 64 33
                       L 62 31, 61 30, 60 28 Z
                       
                       M 65 45
                       C 66 46, 67 47, 68 48
                       L 69 50, 70 52, 70 54
                       C 70 55, 69 56, 68 57
                       L 67 58, 66 59, 65 60
                       C 64 60, 63 60, 62 59
                       L 61 58, 60 57, 59 56
                       C 58 55, 58 54, 58 53
                       L 59 51, 60 49, 62 47
                       C 63 46, 64 45, 65 45 Z"
                    fill="none"
                    stroke="#18E1FF"
                    stroke-width="3"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    filter="url(#africaGlowLoad)"/>
              
              <!-- Loading Spinner (Centered) -->
              <circle cx="60" cy="60" r="24" 
                      fill="none" 
                      stroke="#8CFFF6" 
                      stroke-width="4"
                      stroke-dasharray="30 120"
                      stroke-linecap="round"
                      opacity="0.9"
                      filter="url(#pulseGlow)">
                <animate attributeName="stroke-dashoffset" 
                         dur="1.5s" 
                         repeatCount="indefinite" 
                         values="0;150"/>
                <animate attributeName="transform" 
                         dur="2s" 
                         repeatCount="indefinite" 
                         attributeType="XML" 
                         attributeName="transform" 
                         values="rotate(0 60 60);rotate(360 60 60)"/>
              </circle>
              
              <!-- Inner Pulsing Circle -->
              <circle cx="60" cy="60" r="12" 
                      fill="none" 
                      stroke="#B6FFFB" 
                      stroke-width="3"
                      stroke-dasharray="18 50"
                      stroke-linecap="round"
                      opacity="0.8">
                <animate attributeName="stroke-dashoffset" 
                         dur="1s" 
                         repeatCount="indefinite" 
                         values="0;68"/>
                <animate attributeName="opacity" 
                         dur="2s" 
                         repeatCount="indefinite" 
                         values="0.8;1;0.8"/>
              </circle>
              
              <!-- Pulsing Dot Center -->
              <circle cx="60" cy="60" r="4" 
                      fill="#8CFFF6"
                      opacity="0.9">
                <animate attributeName="r" 
                         dur="1.5s" 
                         repeatCount="indefinite" 
                         values="4;6;4"/>
                <animate attributeName="opacity" 
                         dur="1.5s" 
                         repeatCount="indefinite" 
                         values="0.9;1;0.9"/>
              </circle>
            </svg>
            <p class="loading-text">Buffering...</p>
          </div>
          
          <!-- SIMPLE Loading Placeholder Only -->
          <div class="bantu-player-placeholder" id="videoPlaceholder">
            <div class="bantu-logo-spinner">
              <div class="bantu-logo">
                <i class="fas fa-film"></i>
              </div>
              <div class="bantu-brand-text">BANTU STREAM CONNECT</div>
            </div>
            <p class="loading-text">Ready to play...</p>
          </div>
          
          <!-- PHASE 1 FIX: Enhanced Video Player Controls (only these will show) -->
          <div class="enhanced-video-controls">
            <div class="controls-bar">
              <button class="control-btn play-pause" title="Play/Pause">
                <i class="fas fa-play"></i>
              </button>
              
              <div class="time-display">
                <span class="current-time">0:00</span>
                <span> / </span>
                <span class="duration">0:00</span>
              </div>
              
              <div class="progress-container">
                <input type="range" class="progress-bar" min="0" max="100" value="0">
              </div>
              
              <div class="volume-controls">
                <button class="control-btn volume-btn" title="Volume">
                  <i class="fas fa-volume-up"></i>
                </button>
                <input type="range" class="volume-bar" min="0" max="100" value="100">
              </div>
              
              <button class="control-btn settings-btn" title="Settings">
                <i class="fas fa-cog"></i>
              </button>
              
              <button class="control-btn fullscreen-btn" title="Fullscreen">
                <i class="fas fa-expand"></i>
              </button>
            </div>
            
            <div class="settings-menu">
              <div class="settings-section">
                <h4>Playback Speed</h4>
                <div class="speed-options">
                  <button class="speed-option" data-speed="0.5">0.5x</button>
                  <button class="speed-option" data-speed="0.75">0.75x</button>
                  <button class="speed-option active" data-speed="1">1x</button>
                  <button class="speed-option" data-speed="1.25">1.25x</button>
                  <button class="speed-option" data-speed="1.5">1.5x</button>
                  <button class="speed-option" data-speed="2">2x</button>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Buffering Indicator -->
          <div class="buffering-indicator">
            <div class="spinner"></div>
            <p>Buffering...</p>
          </div>
          
          <!-- Error Overlay -->
          <div class="error-overlay">
            <div class="error-content">
              <i class="fas fa-exclamation-triangle"></i>
              <h3>Playback Error</h3>
              <p class="error-message">Unable to play video. Please check your connection.</p>
              <button class="retry-btn">Retry</button>
            </div>
          </div>
        </div>
        <div class="player-actions">
          <div class="player-controls">
            <button class="control-btn" id="pipBtn" title="Picture-in-Picture">
              <i class="fas fa-images"></i>
            </button>
            <button class="control-btn" id="fullscreenBtn" title="Fullscreen">
              <i class="fas fa-expand"></i>
            </button>
          </div>
          <button id="connectBtn" class="btn connect-btn">
            <i class="fas fa-user-plus"></i>
            <span>Connect</span>
          </button>
        </div>
      </div>

      <!-- Creator Section -->
      <section class="creator-section">
        <div class="creator-info">
          <div class="creator-avatar" id="creatorAvatar">
            <i class="fas fa-user"></i>
          </div>
          <div class="creator-details">
            <h3 id="creatorDisplayName">Creator Name</h3>
            <p>Verified Creator • Joined 2024</p>
          </div>
          <button id="connectCreatorBtn" class="connect-btn">
            <i class="fas fa-user-plus"></i>
            <span>Connect</span>
          </button>
        </div>
      </section>

      <!-- Stats Grid -->
      <section class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-eye"></i>
          </div>
          <div class="stat-content">
            <h4>Total Views</h4>
            <p id="viewsCountFull">0</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-heart"></i>
          </div>
          <div class="stat-content">
            <h4>Likes</h4>
            <p id="likesCount">0</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-clock"></i>
          </div>
          <div class="stat-content">
            <h4>Duration</h4>
            <p id="contentDurationFull">0m 0s</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-tag"></i>
          </div>
          <div class="stat-content">
            <h4>Genre</h4>
            <p id="contentGenre">--</p>
          </div>
        </div>
      </section>

      <!-- Description Section -->
      <section class="description-section">
        <h2>Description</h2>
        <div class="description-content" id="contentDescriptionFull">
          Loading full description...
        </div>
      </section>

      <!-- Comments Section -->
      <section class="comments-section">
        <div class="section-header">
          <h2 class="section-title">Comments <span id="commentsCount">(0)</span></h2>
          <button id="refreshCommentsBtn" class="refresh-btn">
            <i class="fas fa-redo"></i> Refresh
          </button>
        </div>
        <div class="add-comment">
          <div class="comment-avatar" id="userCommentAvatar">
            <i class="fas fa-user"></i>
          </div>
          <div class="comment-input-container">
            <textarea id="commentInput" placeholder="Sign in to add a comment..." disabled></textarea>
            <button id="sendCommentBtn" class="send-comment-btn">
              <i class="fas fa-paper-plane"></i>
            </button>
          </div>
        </div>
        <div class="comments-list" id="commentsList">
          <div class="no-comments" id="noComments">
            <i class="fas fa-comment-slash"></i>
            <p>No comments yet. Be the first to comment!</p>
          </div>
        </div>
      </section>

      <!-- Related Content -->
      <section class="related-section">
        <div class="section-header">
          <h2 class="section-title">Related Content</h2>
        </div>
        <div class="content-grid" id="relatedGrid">
          <!-- Related content will be loaded here -->
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <p>Bantu Stream Connect © 2025 • Built in South Africa</p>
      <div class="footer-links">
        <a href="privacy-policy.html">Privacy Policy</a>
        <a href="terms-of-service.html">Terms of Service</a>
        <a href="support.html">Support</a>
      </div>
    </footer>

    <!-- Global Navigation Button -->
    <div class="navigation-button-container">
      <div class="navigation-button">
        <div class="nav-icon" onclick="window.location.href='https://bantustreamconnect.com/'" title="Home">
          <i class="fas fa-home"></i>
        </div>
        <div class="nav-icon" id="nav-theme-toggle" title="Change Theme">
          <i class="fas fa-palette"></i>
        </div>
        <div class="nav-icon" onclick="window.location.href='creator-upload.html'" title="Create Content">
          <i class="fas fa-plus-circle"></i>
        </div>
        <div class="nav-icon" onclick="window.location.href='creator-dashboard.html'" title="Creator Dashboard">
          <i class="fas fa-tachometer-alt"></i>
        </div>
        <div class="nav-icon" id="nav-notifications-btn" title="Notifications">
          <i class="fas fa-bell"></i>
          <span class="nav-notification-badge" id="nav-notification-count" style="display: none;">0</span>
        </div>
      </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container"></div>
    
    <!-- Back to Top Button -->
    <button id="backToTopBtn" class="back-to-top">
      <i class="fas fa-arrow-up"></i>
    </button>

    <!-- =================================================================== -->
    <!-- MODALS & PANELS                                                     -->
    <!-- =================================================================== -->

    <!-- Analytics Modal -->
    <div id="analytics-modal" class="analytics-modal">
      <div class="analytics-content">
        <div class="analytics-header">
          <h2>Content Analytics</h2>
          <button id="close-analytics" class="close-search-btn">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="analytics-body">
          <div class="analytics-grid">
            <div class="analytics-card">
              <h3>Total Views</h3>
              <div class="analytics-value" id="content-total-views">0</div>
              <div class="analytics-trend" id="views-trend">+0%</div>
            </div>
            <div class="analytics-card">
              <h3>Avg. Watch Time</h3>
              <div class="analytics-value" id="avg-watch-time">0m</div>
              <div class="analytics-trend" id="watch-time-trend">+0%</div>
            </div>
            <div class="analytics-card">
              <h3>Engagement Rate</h3>
              <div class="analytics-value" id="engagement-rate">0%</div>
              <div class="analytics-trend" id="engagement-trend">+0%</div>
            </div>
            <div class="analytics-card">
              <h3>Comments</h3>
              <div class="analytics-value" id="total-comments">0</div>
              <div class="analytics-trend" id="comments-trend">+0%</div>
            </div>
          </div>
          <div class="charts-container">
            <canvas id="content-engagement-chart"></canvas>
          </div>
        </div>
      </div>
    </div>

    <!-- Search Modal -->
    <div id="search-modal" class="search-modal">
      <div class="search-modal-header">
        <div class="search-input-container">
          <i class="search-icon fas fa-search"></i>
          <input type="text" id="search-input" class="search-input" placeholder="Search content, creators, or categories..." autocomplete="off">
        </div>
        <button id="close-search-btn" class="close-search-btn">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="search-filters">
        <div class="filter-group">
          <label class="filter-label">Category</label>
          <select id="category-filter" class="filter-select">
            <option value="">All Categories</option>
            <option value="Music">Music</option>
            <option value="STEM">STEM</option>
            <option value="Culture">Culture</option>
            <option value="News">News</option>
            <option value="Sports">Sports</option>
          </select>
        </div>
        <div class="filter-group">
          <label class="filter-label">Sort By</label>
          <select id="sort-filter" class="filter-select">
            <option value="newest">Newest First</option>
            <option value="popular">Most Popular</option>
            <option value="trending">Trending</option>
          </select>
        </div>
      </div>
      <div id="search-results" class="search-results">
        <div id="search-results-grid" class="search-results-grid">
          <!-- Results loaded here -->
        </div>
      </div>
    </div>

    <!-- Notifications Panel -->
    <div id="notifications-panel" class="notifications-panel">
      <div class="notifications-header">
        <h2>Notifications</h2>
        <button id="close-notifications" class="icon-btn">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="notifications-list" id="notifications-list">
        <!-- Notifications loaded here -->
      </div>
      <div class="notifications-footer">
        <button id="mark-all-read" class="text-btn">Mark all as read</button>
        <button id="notification-settings" class="text-btn">Settings</button>
      </div>
    </div>

    <!-- Theme Selector -->
    <div id="theme-selector" class="theme-selector">
      <button class="theme-option" data-theme="dark">
        <i class="fas fa-moon"></i> Dark
      </button>
      <button class="theme-option" data-theme="light">
        <i class="fas fa-sun"></i> Light
      </button>
      <button class="theme-option" data-theme="high-contrast">
        <i class="fas fa-eye"></i> High Contrast
      </button>
    </div>

  </div> <!-- Closing div for #app -->

  <!-- Initialize Supabase Client -->
  <script>
    // PHASE 1 FIX: Store in window for global access
    const SUPABASE_URL = 'https://ydnxqnbjoshvxteevemc.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlkbnhxbmJqb3Nodnh0ZWV2ZW1jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc2MzI0OTMsImV4cCI6MjA3MzIwODQ5M30.NlaCCnLPSz1mM7AFeSlfZQ78kYEKUMh_Fi-7P_ccs_U';
    
    // Initialize Supabase client
    window.supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
    
    // Make constants available globally for other scripts
    window.SUPABASE_URL = SUPABASE_URL;
    window.SUPABASE_ANON_KEY = SUPABASE_ANON_KEY;
  </script>
  
  <!-- Utility Scripts -->
  <script src="js/state-manager.js"></script>
  <script src="js/supabase-helper.js"></script>
  <script src="js/auth-helper.js"></script>
  <script src="js/security.js"></script>
  <script src="js/analytics.js"></script>
  <script src="js/video-player.js"></script>
  <script src="js/virtual-scroll.js"></script>
  
  <!-- PHASE 1 FIX: New Video Player Features -->
  <script src="js/video-player-features.js"></script>
  
  <!-- Main Content Detail Script -->
  <script src="js/content-detail.js"></script>
  
  <!-- PHASE 1 FIX: Initialize View Deduplication -->
  <script>
    // Initialize view deduplication when page loads
    document.addEventListener('DOMContentLoaded', function() {
      // Clean up any old view data (older than 30 days)
      try {
        const viewedContent = JSON.parse(localStorage.getItem('bantu_viewed_content') || '{}');
        const thirtyDaysAgo = Date.now() - (30 * 24 * 60 * 60 * 1000);
        let needsCleanup = false;
        
        Object.keys(viewedContent).forEach(id => {
          if (viewedContent[id] < thirtyDaysAgo) {
            delete viewedContent[id];
            needsCleanup = true;
          }
        });
        
        if (needsCleanup) {
          localStorage.setItem('bantu_viewed_content', JSON.stringify(viewedContent));
        }
      } catch (error) {
        console.warn('Error cleaning up view data:', error);
      }
    });
  </script>
</body>
</html>
