<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Content Details - Bantu Stream Connect</title>
    
    <!-- Base Styles from home-feed.html -->
    <style>
        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #001F54 0%, #0A0E3F 50%, #000000 100%);
            color: white;
            min-height: 100vh;
        }
        
        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #001F54 0%, #0A0E3F 50%, #000000 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border-top-color: #4dabf7;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Header */
        .header {
            background: rgba(0, 31, 84, 0.9);
            backdrop-filter: blur(10px);
            padding: 15px 20px;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .logo-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #4dabf7 0%, #748ffc 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .logo-text {
            font-size: 18px;
            font-weight: 600;
        }
        
        .header-actions {
            display: flex;
            gap: 10px;
        }
        
        .icon-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .icon-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }
        
        .search-btn {
            color: #FFD700;
        }
        
        /* Main Content */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Hero Section (Custom for content detail) */
        .content-hero {
            background: linear-gradient(135deg, #0A1128 0%, #002855 100%);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 30px;
            align-items: center;
        }
        
        @media (max-width: 768px) {
            .content-hero {
                grid-template-columns: 1fr;
            }
        }
        
        .hero-poster {
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            border: 2px solid rgba(77, 171, 247, 0.3);
            height: 300px;
            background: linear-gradient(45deg, #0A1128, #002855);
        }
        
        .hero-poster img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .poster-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #4dabf7;
            font-size: 4rem;
        }
        
        .hero-info {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .hero-info h1 {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 5px;
            color: white;
        }
        
        .hero-meta {
            display: flex;
            gap: 20px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }
        
        .meta-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
        }
        
        .meta-item i {
            color: #4dabf7;
        }
        
        .hero-description {
            color: rgba(255, 255, 255, 0.7);
            line-height: 1.6;
            margin-bottom: 20px;
        }
        
        .hero-actions {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .action-btn {
            padding: 12px 24px;
            border-radius: 10px;
            border: none;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .play-btn {
            background: linear-gradient(135deg, #4dabf7 0%, #748ffc 100%);
            color: white;
        }
        
        .play-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(77, 171, 247, 0.4);
        }
        
        .secondary-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
        }
        
        .secondary-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-3px);
        }
        
        /* Content Sections */
        .section {
            margin-bottom: 40px;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .section-title {
            font-size: 24px;
            font-weight: 700;
        }
        
        /* Creator Info Section */
        .creator-section {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
        }
        
        .creator-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .creator-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #4dabf7 0%, #748ffc 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: white;
        }
        
        .creator-details {
            flex: 1;
        }
        
        .creator-details h3 {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .creator-details p {
            color: rgba(255, 255, 255, 0.6);
            font-size: 14px;
            margin-bottom: 10px;
        }
        
        .subscribe-btn {
            padding: 10px 25px;
            background: linear-gradient(135deg, #4dabf7 0%, #748ffc 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }
        
        .subscribe-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(77, 171, 247, 0.4);
        }
        
        .subscribe-btn.subscribed {
            background: linear-gradient(135deg, #51cf66 0%, #2b8a3e 100%);
        }
        
        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            background: rgba(77, 171, 247, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #4dabf7;
            font-size: 1.5rem;
        }
        
        .stat-content h4 {
            color: rgba(255, 255, 255, 0.6);
            font-size: 14px;
            margin-bottom: 5px;
        }
        
        .stat-content p {
            font-size: 18px;
            font-weight: 600;
        }
        
        /* Description Section */
        .description-section {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
        }
        
        .description-content {
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.6;
            margin-bottom: 15px;
        }
        
        .show-more-btn {
            background: transparent;
            color: #4dabf7;
            border: 1px solid #4dabf7;
            padding: 8px 20px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .show-more-btn:hover {
            background: rgba(77, 171, 247, 0.1);
        }
        
        /* Comments Section */
        .comments-section {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
        }
        
        .comments-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }
        
        .refresh-btn {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: #4dabf7;
            font-size: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }
        
        .refresh-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .add-comment {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .comment-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #4dabf7 0%, #748ffc 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
        }
        
        .comment-input-container {
            flex: 1;
            display: flex;
            gap: 15px;
        }
        
        .comment-input-container textarea {
            flex: 1;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 15px;
            color: white;
            font-family: inherit;
            font-size: 16px;
            resize: vertical;
            min-height: 60px;
            outline: none;
        }
        
        .comment-input-container textarea:focus {
            border-color: #4dabf7;
        }
        
        .send-comment-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #4dabf7 0%, #748ffc 100%);
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .send-comment-btn:hover {
            transform: scale(1.1);
        }
        
        .comments-list {
            max-height: 400px;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        .comments-list::-webkit-scrollbar {
            width: 6px;
        }
        
        .comments-list::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
        }
        
        .comments-list::-webkit-scrollbar-thumb {
            background: #4dabf7;
            border-radius: 3px;
        }
        
        .no-comments {
            text-align: center;
            padding: 40px 20px;
            color: rgba(255, 255, 255, 0.5);
        }
        
        .no-comments i {
            font-size: 3rem;
            margin-bottom: 15px;
            color: rgba(255, 255, 255, 0.3);
        }
        
        .comment-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
        }
        
        .comment-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .comment-avatar-sm {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #4dabf7 0%, #748ffc 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1rem;
        }
        
        .comment-user {
            flex: 1;
        }
        
        .comment-user strong {
            font-size: 16px;
            display: block;
            margin-bottom: 3px;
        }
        
        .comment-time {
            color: rgba(255, 255, 255, 0.5);
            font-size: 12px;
        }
        
        .comment-actions {
            display: flex;
            gap: 10px;
        }
        
        .comment-action-btn {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .comment-action-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }
        
        .edit-btn {
            color: #4dabf7;
        }
        
        .delete-btn {
            color: #ff6b6b;
        }
        
        .like-btn {
            color: #ff6b6b;
        }
        
        .like-btn.liked {
            color: #ff6b6b;
        }
        
        .comment-content {
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.5;
            margin-bottom: 15px;
            padding: 0 5px;
        }
        
        .comment-footer {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 0 5px;
        }
        
        .like-count {
            display: flex;
            align-items: center;
            gap: 8px;
            color: rgba(255, 255, 255, 0.6);
            font-size: 14px;
        }
        
        /* Related Content Section */
        .related-section {
            margin-bottom: 40px;
        }
        
        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }
        
        .content-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .content-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            border-color: rgba(255, 255, 255, 0.3);
        }
        
        .card-thumbnail {
            position: relative;
            height: 140px;
            overflow: hidden;
        }
        
        .card-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        
        .content-card:hover .card-thumbnail img {
            transform: scale(1.05);
        }
        
        .thumbnail-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to bottom, transparent 50%, rgba(0, 0, 0, 0.5) 100%);
        }
        
        .card-content {
            padding: 15px;
        }
        
        .card-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 10px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            min-height: 40px;
        }
        
        .related-meta {
            display: flex;
            align-items: center;
            gap: 5px;
            color: rgba(255, 255, 255, 0.6);
            font-size: 14px;
        }
        
        .related-meta i {
            color: #4dabf7;
        }
        
        .related-placeholder {
            grid-column: 1 / -1;
            text-align: center;
            padding: 60px 20px;
            color: rgba(255, 255, 255, 0.5);
        }
        
        .related-placeholder i {
            font-size: 3rem;
            margin-bottom: 15px;
            color: rgba(255, 255, 255, 0.3);
        }
        
        /* Footer */
        .footer {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding: 30px 20px;
            text-align: center;
            color: rgba(255, 255, 255, 0.6);
        }
        
        /* Toast */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 10px;
            color: white;
            font-weight: 500;
            z-index: 1000;
            animation: slideIn 0.3s ease;
            max-width: 300px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .toast.error {
            background: linear-gradient(135deg, #ff6b6b 0%, #c92a2a 100%);
        }
        
        .toast.success {
            background: linear-gradient(135deg, #51cf66 0%, #2b8a3e 100%);
        }
        
        .toast.info {
            background: linear-gradient(135deg, #4dabf7 0%, #1c7ed6 100%);
        }
        
        .toast.warning {
            background: linear-gradient(135deg, #ffd43b 0%, #f08c00 100%);
            color: #000;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        /* Modals (Custom) */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            backdrop-filter: blur(5px);
        }
        
        .modal-container {
            background: linear-gradient(135deg, #0A1128 0%, #002855 100%);
            padding: 30px;
            border-radius: 20px;
            max-width: 500px;
            width: 90%;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .modal-header h3 {
            color: white;
            font-size: 22px;
            margin: 0;
        }
        
        .modal-close {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .modal-close:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .modal-body {
            margin-bottom: 25px;
        }
        
        .modal-body textarea {
            width: 100%;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 15px;
            color: white;
            font-family: inherit;
            font-size: 16px;
            resize: vertical;
            min-height: 120px;
            outline: none;
        }
        
        .modal-body textarea:focus {
            border-color: #4dabf7;
        }
        
        .modal-body p {
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.5;
            margin-bottom: 15px;
        }
        
        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
        }
        
        .modal-btn {
            padding: 12px 30px;
            border-radius: 10px;
            border: none;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .modal-btn:hover {
            transform: translateY(-2px);
        }
        
        .cancel-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
        }
        
        .cancel-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .save-btn {
            background: linear-gradient(135deg, #4dabf7 0%, #748ffc 100%);
            color: white;
        }
        
        .delete-btn {
            background: linear-gradient(135deg, #ff6b6b 0%, #c92a2a 100%);
            color: white;
        }
        
        /* Back to Top Button */
        .back-to-top {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #4dabf7 0%, #748ffc 100%);
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            z-index: 100;
            transition: all 0.3s ease;
            display: none;
        }
        
        .back-to-top:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(77, 171, 247, 0.4);
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .content-hero {
                padding: 20px;
                gap: 20px;
            }
            
            .hero-poster {
                height: 250px;
            }
            
            .hero-info h1 {
                font-size: 24px;
            }
            
            .hero-meta {
                gap: 15px;
            }
            
            .hero-actions {
                flex-direction: column;
            }
            
            .action-btn {
                width: 100%;
                justify-content: center;
            }
            
            .content-grid {
                grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
                gap: 15px;
            }
            
            .creator-info {
                flex-direction: column;
                text-align: center;
            }
            
            .creator-avatar {
                width: 70px;
                height: 70px;
            }
            
            .subscribe-btn {
                width: 100%;
                justify-content: center;
            }
            
            .stats-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                gap: 15px;
            }
            
            .add-comment {
                flex-direction: column;
            }
            
            .comment-input-container {
                width: 100%;
            }
            
            .modal-container {
                width: 95%;
                padding: 20px;
            }
            
            .modal-footer {
                flex-direction: column;
            }
            
            .modal-btn {
                width: 100%;
            }
        }
        
        @media (max-width: 480px) {
            .hero-meta {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .content-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .card-thumbnail {
                height: 120px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading" class="loading-screen">
        <div class="spinner"></div>
        <div id="loading-text">Loading Content Details...</div>
    </div>

    <!-- Main Content (hidden until loaded) -->
    <div id="app" style="display: none;">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <div class="logo-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                        <path d="M4 6h16M4 12h16M4 18h16"/>
                    </svg>
                </div>
                <div class="logo-text">Bantu Stream Connect</div>
            </div>
            <div class="header-actions">
                <button id="search-btn" class="icon-btn search-btn" title="Search">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                    </svg>
                </button>
                <button id="profile-btn" class="icon-btn" title="Profile">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                    </svg>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="container">
            <!-- Content Hero Section -->
            <section class="content-hero" id="contentHero">
                <div class="hero-poster" id="heroPoster">
                    <div class="poster-placeholder" id="posterPlaceholder">
                        <i class="fas fa-play-circle"></i>
                    </div>
                </div>
                <div class="hero-info">
                    <h1 id="contentTitle">Loading...</h1>
                    <div class="hero-meta">
                        <span class="meta-item" id="contentCreator">
                            <i class="fas fa-user"></i>
                            <span id="creatorName">Loading...</span>
                        </span>
                        <span class="meta-item" id="contentViews">
                            <i class="fas fa-eye"></i>
                            <span id="viewsCount">0 views</span>
                        </span>
                        <span class="meta-item" id="contentLikes">
                            <i class="fas fa-heart"></i>
                            <span id="likesCount">0 likes</span>
                        </span>
                        <span class="meta-item" id="contentDuration">
                            <i class="fas fa-clock"></i>
                            <span id="durationText">-</span>
                        </span>
                    </div>
                    <div class="hero-description">
                        <p id="contentDescriptionShort">Loading description...</p>
                    </div>
                    <div class="hero-actions">
                        <button class="action-btn play-btn" id="playBtn">
                            <i class="fas fa-play"></i>
                            <span>Play Now</span>
                        </button>
                        <button class="action-btn secondary-btn" id="downloadBtn">
                            <i class="fas fa-download"></i>
                            <span>Download</span>
                        </button>
                        <button class="action-btn secondary-btn" id="favoriteBtn">
                            <i class="far fa-heart"></i>
                            <span>Favorite</span>
                        </button>
                        <button class="action-btn secondary-btn" id="shareBtn">
                            <i class="fas fa-share"></i>
                            <span>Share</span>
                        </button>
                    </div>
                </div>
            </section>

            <!-- Creator Info Section -->
            <section class="creator-section" id="creatorSection">
                <div class="creator-info">
                    <div class="creator-avatar">
                        <i class="fas fa-user-circle"></i>
                    </div>
                    <div class="creator-details">
                        <h3 id="creatorDisplayName">Creator Name</h3>
                        <p id="creatorSubscribers">0 subscribers</p>
                    </div>
                    <button class="subscribe-btn" id="subscribeBtn">
                        <i class="fas fa-user-plus"></i>
                        <span>Subscribe</span>
                    </button>
                </div>
            </section>

            <!-- Stats Grid -->
            <div class="stats-grid" id="statsGrid">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-calendar-alt"></i>
                    </div>
                    <div class="stat-content">
                        <h4>Uploaded</h4>
                        <p id="uploadDate">-</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-film"></i>
                    </div>
                    <div class="stat-content">
                        <h4>Duration</h4>
                        <p id="contentDurationFull">-</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-tag"></i>
                    </div>
                    <div class="stat-content">
                        <h4>Genre</h4>
                        <p id="contentGenre">-</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-flag"></i>
                    </div>
                    <div class="stat-content">
                        <h4>Language</h4>
                        <p id="contentLanguage">-</p>
                    </div>
                </div>
            </div>

            <!-- Description Section -->
            <section class="description-section">
                <div class="section-header">
                    <h2 class="section-title">Description</h2>
                </div>
                <div class="description-content">
                    <p id="contentDescriptionFull">Loading full description...</p>
                    <button class="show-more-btn" id="showMoreBtn" style="display: none;">Show more</button>
                </div>
            </section>

            <!-- Comments Section -->
            <section class="comments-section">
                <div class="section-header">
                    <h2 class="section-title">
                        Comments
                        <span id="commentsCount" style="font-size: 1rem; color: rgba(255, 255, 255, 0.6); margin-left: 0.5rem;">(0)</span>
                    </h2>
                    <button class="refresh-btn" id="refreshCommentsBtn">
                        <i class="fas fa-sync-alt"></i>
                        <span>Refresh</span>
                    </button>
                </div>
                
                <!-- Add Comment Form -->
                <div class="add-comment">
                    <div class="comment-avatar">
                        <i class="fas fa-user-circle"></i>
                    </div>
                    <div class="comment-input-container">
                        <textarea 
                            id="commentInput" 
                            placeholder="Add a comment..." 
                            rows="3"
                        ></textarea>
                        <button class="send-comment-btn" id="sendCommentBtn">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>

                <!-- Comments List -->
                <div class="comments-list" id="commentsList">
                    <div class="no-comments" id="noComments">
                        <i class="far fa-comment-alt"></i>
                        <p>No comments yet. Be the first to comment!</p>
                    </div>
                    <!-- Comments will be loaded here -->
                </div>
            </section>

            <!-- Related Content Section -->
            <section class="related-section">
                <div class="section-header">
                    <h2 class="section-title">More Like This</h2>
                </div>
                <div class="content-grid" id="relatedGrid">
                    <div class="related-placeholder">
                        <i class="fas fa-video"></i>
                        <p>Loading related content...</p>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>Bantu Stream Connect ¬© 2025 ‚Ä¢ Built in South Africa</p>
        </footer>
    </div>

    <!-- Modals -->
    <div class="modal-overlay" id="editCommentModal">
        <div class="modal-container">
            <div class="modal-header">
                <h3>Edit Comment</h3>
                <button class="modal-close" id="closeEditModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <textarea 
                    id="editCommentInput" 
                    placeholder="Edit your comment..." 
                    rows="4"
                ></textarea>
            </div>
            <div class="modal-footer">
                <button class="modal-btn cancel-btn" id="cancelEditBtn">Cancel</button>
                <button class="modal-btn save-btn" id="saveEditBtn">Save Changes</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="deleteCommentModal">
        <div class="modal-container">
            <div class="modal-header">
                <h3>Delete Comment</h3>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete this comment? This action cannot be undone.</p>
            </div>
            <div class="modal-footer">
                <button class="modal-btn cancel-btn" id="cancelDeleteBtn">Cancel</button>
                <button class="modal-btn delete-btn" id="confirmDeleteBtn">Delete</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="downloadModal">
        <div class="modal-container">
            <div class="modal-header">
                <h3>Download Content</h3>
                <button class="modal-close" id="closeDownloadModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p id="downloadModalText">Would you like to download this content for offline viewing?</p>
                <div style="background: rgba(77, 171, 247, 0.1); border: 1px solid rgba(77, 171, 247, 0.2); border-radius: 12px; padding: 15px; margin-top: 15px; display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-info-circle" style="color: #4dabf7;"></i>
                    <p style="color: rgba(255, 255, 255, 0.7); margin: 0; font-size: 14px;">File will be downloaded to your device's downloads folder.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn cancel-btn" id="cancelDownloadBtn">Cancel</button>
                <button class="modal-btn save-btn" id="confirmDownloadBtn">Download</button>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container"></div>

    <!-- Back to Top Button -->
    <button class="back-to-top" id="backToTop">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- Font Awesome -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>

    <!-- SIMPLE SUPABASE CLIENT (from home-feed.html) -->
    <script>
        // Simple Supabase REST client (no AuthClient dependency)
        class SimpleSupabaseClient {
            constructor(url, key) {
                this.url = url;
                this.key = key;
            }
            
            async query(table, options = {}) {
                const {
                    select = '*',
                    where = {},
                    orderBy = 'created_at',
                    order = 'desc',
                    limit = 100,
                    offset = 0
                } = options;
                
                // Build query URL
                let queryUrl = `${this.url}/rest/v1/${table}?select=${select}`;
                
                // Add filters
                Object.keys(where).forEach(key => {
                    queryUrl += `&${key}=eq.${encodeURIComponent(where[key])}`;
                });
                
                // Add ordering
                if (orderBy) {
                    queryUrl += `&order=${orderBy}.${order}`;
                }
                
                // Add limit and offset
                queryUrl += `&limit=${limit}&offset=${offset}`;
                
                try {
                    const response = await fetch(queryUrl, {
                        headers: {
                            'apikey': this.key,
                            'Authorization': `Bearer ${this.key}`,
                            'Content-Type': 'application/json'
                        }
                    });
                    
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    
                    return await response.json();
                } catch (error) {
                    console.error('Supabase query error:', error);
                    throw error;
                }
            }
            
            async queryWithFilter(table, column, value, select = '*') {
                try {
                    const response = await fetch(
                        `${this.url}/rest/v1/${table}?${column}=eq.${encodeURIComponent(value)}&select=${select}`,
                        {
                            headers: {
                                'apikey': this.key,
                                'Authorization': `Bearer ${this.key}`,
                                'Content-Type': 'application/json'
                            }
                        }
                    );
                    
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    
                    return await response.json();
                } catch (error) {
                    console.error('Supabase query error:', error);
                    throw error;
                }
            }
            
            fixMediaUrl(url) {
                if (!url) return '';
                if (url.startsWith('http')) return url;
                return `https://ydnxqnbjoshvxteevemc.supabase.co/storage/v1/object/public/${url.replace(/^\/+/, '')}`;
            }
        }
        
        // Initialize simple Supabase client
        const supabase = new SimpleSupabaseClient(
            'https://ydnxqnbjoshvxteevemc.supabase.co',
            'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlkbnhxbmJqb3Nodnh0ZWV2ZW1jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc2MzI0OTMsImV4cCI6MjA3MzIwODQ5M30.NlaCCnLPSz1mM7AFeSlfZQ78kYEKUMh_Fi-7P_ccs_U'
        );
        
        console.log('‚úÖ Simple Supabase client initialized');
    </script>

    <!-- CONTENT DETAIL JAVASCRIPT -->
    <script>
        // Wait for DOM to be ready
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üé¨ Content Detail Screen Initializing...');
            
            // Global variables
            let contentData = null;
            let comments = [];
            let relatedContent = [];
            let editingCommentId = null;
            let deletingCommentId = null;
            let currentContentId = null;
            let isSubscribed = false;
            let isInFavorites = false;
            let isLoading = false;
            
            // DOM Elements
            const loadingScreen = document.getElementById('loading');
            const loadingText = document.getElementById('loading-text');
            const app = document.getElementById('app');
            
            // Hero Section Elements
            const heroPoster = document.getElementById('heroPoster');
            const posterPlaceholder = document.getElementById('posterPlaceholder');
            const contentTitle = document.getElementById('contentTitle');
            const creatorName = document.getElementById('creatorName');
            const viewsCount = document.getElementById('viewsCount');
            const likesCount = document.getElementById('likesCount');
            const durationText = document.getElementById('durationText');
            const contentDescriptionShort = document.getElementById('contentDescriptionShort');
            
            // Buttons
            const playBtn = document.getElementById('playBtn');
            const downloadBtn = document.getElementById('downloadBtn');
            const favoriteBtn = document.getElementById('favoriteBtn');
            const shareBtn = document.getElementById('shareBtn');
            
            // Creator Info Elements
            const creatorDisplayName = document.getElementById('creatorDisplayName');
            const creatorSubscribers = document.getElementById('creatorSubscribers');
            const subscribeBtn = document.getElementById('subscribeBtn');
            
            // Stats Elements
            const uploadDate = document.getElementById('uploadDate');
            const contentDurationFull = document.getElementById('contentDurationFull');
            const contentGenre = document.getElementById('contentGenre');
            const contentLanguage = document.getElementById('contentLanguage');
            
            // Description Elements
            const contentDescriptionFull = document.getElementById('contentDescriptionFull');
            const showMoreBtn = document.getElementById('showMoreBtn');
            
            // Comments Elements
            const refreshCommentsBtn = document.getElementById('refreshCommentsBtn');
            const commentInput = document.getElementById('commentInput');
            const sendCommentBtn = document.getElementById('sendCommentBtn');
            const commentsList = document.getElementById('commentsList');
            const noComments = document.getElementById('noComments');
            const commentsCount = document.getElementById('commentsCount');
            
            // Related Content
            const relatedGrid = document.getElementById('relatedGrid');
            
            // Modal Elements
            const editCommentModal = document.getElementById('editCommentModal');
            const editCommentInput = document.getElementById('editCommentInput');
            const closeEditModal = document.getElementById('closeEditModal');
            const cancelEditBtn = document.getElementById('cancelEditBtn');
            const saveEditBtn = document.getElementById('saveEditBtn');
            
            const deleteCommentModal = document.getElementById('deleteCommentModal');
            const cancelDeleteBtn = document.getElementById('cancelDeleteBtn');
            const confirmDeleteBtn = document.getElementById('confirmDeleteBtn');
            
            const downloadModal = document.getElementById('downloadModal');
            const closeDownloadModal = document.getElementById('closeDownloadModal');
            const cancelDownloadBtn = document.getElementById('cancelDownloadBtn');
            const confirmDownloadBtn = document.getElementById('confirmDownloadBtn');
            const downloadModalText = document.getElementById('downloadModalText');
            
            // Toast Container
            const toastContainer = document.getElementById('toast-container');
            
            // Back to Top Button
            const backToTopBtn = document.getElementById('backToTop');
            
            // ‚úÖ INITIALIZE
            async function init() {
                try {
                    // Get content ID from URL
                    const urlParams = new URLSearchParams(window.location.search);
                    currentContentId = urlParams.get('id');
                    
                    if (!currentContentId) {
                        showToast('No content ID provided', 'error');
                        setTimeout(() => window.location.href = 'index.html', 2000);
                        return;
                    }
                    
                    console.log('üì¶ Loading content ID:', currentContentId);
                    
                    // Load content data
                    await loadContentData();
                    
                    // Load related content
                    await loadRelatedContent();
                    
                    // Show the app
                    loadingScreen.style.display = 'none';
                    app.style.display = 'block';
                    
                    // Set up event listeners
                    setupEventListeners();
                    
                    // Initialize back to top button
                    initBackToTop();
                    
                    console.log('‚úÖ Content detail initialized successfully');
                    
                } catch (error) {
                    console.error('‚ùå Initialization error:', error);
                    showToast('Failed to load content. Loading sample data...', 'warning');
                    loadSampleData();
                }
            }
            
            // ‚úÖ LOAD CONTENT DATA
            async function loadContentData() {
                try {
                    loadingText.textContent = 'Loading content details...';
                    
                    // Try different table names
                    let contentDataArray = [];
                    
                    try {
                        // Try 'Content' table first
                        contentDataArray = await supabase.queryWithFilter('Content', 'id', currentContentId);
                    } catch (error) {
                        console.log('‚ö†Ô∏è Content table failed, trying content table...');
                        try {
                            // Try lowercase 'content' table
                            contentDataArray = await supabase.queryWithFilter('content', 'id', currentContentId);
                        } catch (error2) {
                            console.log('‚ö†Ô∏è Both table queries failed');
                            throw new Error('Content not found');
                        }
                    }
                    
                    if (!contentDataArray || contentDataArray.length === 0) {
                        throw new Error('Content not found');
                    }
                    
                    contentData = contentDataArray[0];
                    console.log('‚úÖ Content loaded:', contentData.title);
                    
                    // Update UI with content data
                    updateContentUI();
                    
                } catch (error) {
                    console.error('‚ùå Error loading content:', error);
                    showToast('Content not found', 'error');
                    throw error;
                }
            }
            
            // ‚úÖ UPDATE CONTENT UI
            function updateContentUI() {
                if (!contentData) return;
                
                // Update hero section
                contentTitle.textContent = contentData.title || 'Untitled';
                
                const creator = contentData.creator || 
                               contentData.creator_display_name || 
                               contentData.user_profiles?.display_name ||
                               contentData.user_profiles?.username || 
                               'Unknown Creator';
                creatorName.textContent = creator;
                
                // Set poster image
                if (contentData.thumbnail_url) {
                    const thumbnailUrl = supabase.fixMediaUrl(contentData.thumbnail_url);
                    posterPlaceholder.innerHTML = `<img src="${thumbnailUrl}" alt="${contentData.title}" style="width: 100%; height: 100%; object-fit: cover;">`;
                }
                
                // Update creator info
                creatorDisplayName.textContent = creator;
                creatorSubscribers.textContent = `${contentData.subscriber_count || 0} subscribers`;
                
                // Update stats
                uploadDate.textContent = formatDate(contentData.created_at);
                
                if (contentData.duration) {
                    const durationFormatted = formatDuration(contentData.duration);
                    contentDurationFull.textContent = durationFormatted;
                    durationText.textContent = durationFormatted;
                }
                
                contentGenre.textContent = contentData.genre || 'Not specified';
                contentLanguage.textContent = contentData.language || 'Unknown';
                
                // Update views and likes
                viewsCount.textContent = `${contentData.views || contentData.views_count || 0} views`;
                likesCount.textContent = `${contentData.likes || contentData.likes_count || 0} likes`;
                
                // Update description
                const description = contentData.description || 'No description available.';
                const shortDescription = description.length > 150 ? description.substring(0, 150) + '...' : description;
                contentDescriptionShort.textContent = shortDescription;
                contentDescriptionFull.textContent = description;
                
                // Show more/less button for long descriptions
                if (description.length > 300) {
                    showMoreBtn.style.display = 'block';
                    contentDescriptionFull.textContent = description.substring(0, 300) + '...';
                    showMoreBtn.textContent = 'Show more';
                }
            }
            
            // ‚úÖ LOAD RELATED CONTENT
            async function loadRelatedContent() {
                try {
                    let similarContent = [];
                    
                    try {
                        similarContent = await supabase.query('Content', {
                            select: '*',
                            where: { status: 'published' },
                            limit: 8
                        });
                    } catch (error) {
                        console.log('‚ö†Ô∏è Content table failed, trying content table...');
                        similarContent = await supabase.query('content', {
                            select: '*',
                            where: { status: 'published' },
                            limit: 8
                        });
                    }
                    
                    // Filter out current content and limit to 8
                    relatedContent = similarContent
                        .filter(content => content.id !== currentContentId)
                        .slice(0, 8);
                    
                    renderRelatedContent();
                    
                } catch (error) {
                    console.error('‚ùå Error loading related content:', error);
                    relatedGrid.innerHTML = `
                        <div class="related-placeholder">
                            <i class="fas fa-exclamation-triangle"></i>
                            <p>Failed to load related content</p>
                        </div>
                    `;
                }
            }
            
            // ‚úÖ RENDER RELATED CONTENT
            function renderRelatedContent() {
                if (!relatedContent.length) {
                    relatedGrid.innerHTML = `
                        <div class="related-placeholder">
                            <i class="fas fa-video-slash"></i>
                            <p>No related content found</p>
                        </div>
                    `;
                    return;
                }
                
                relatedGrid.innerHTML = '';
                relatedContent.forEach(content => {
                    const card = document.createElement('div');
                    card.className = 'content-card';
                    card.dataset.contentId = content.id;
                    card.innerHTML = `
                        <div class="card-thumbnail">
                            <img src="${content.thumbnail_url ? supabase.fixMediaUrl(content.thumbnail_url) : 'https://images.unsplash.com/photo-1511379938547-c1f69419868d?w=400&h=225&fit=crop'}" 
                                 alt="${content.title}"
                                 onerror="this.src='https://images.unsplash.com/photo-1511379938547-c1f69419868d?w=400&h=225&fit=crop'">
                            <div class="thumbnail-overlay"></div>
                        </div>
                        <div class="card-content">
                            <h3 class="card-title" title="${content.title}">
                                ${content.title.length > 50 ? content.title.substring(0, 50) + '...' : content.title}
                            </h3>
                            <div class="related-meta">
                                <i class="fas fa-eye"></i>
                                <span>${content.views || content.views_count || 0} views</span>
                            </div>
                        </div>
                    `;
                    
                    // Add click event
                    card.addEventListener('click', () => {
                        window.location.href = `content-detail.html?id=${content.id}`;
                    });
                    
                    relatedGrid.appendChild(card);
                });
            }
            
            // ‚úÖ LOAD SAMPLE DATA (fallback)
            function loadSampleData() {
                // Sample content data
                contentData = {
                    id: currentContentId || '1',
                    title: 'African Music Festival Highlights',
                    description: 'Highlights from the biggest African music festival featuring top artists from across the continent. Experience the vibrant culture, amazing performances, and unforgettable moments. This festival brings together the best of African music in a celebration of culture and talent.',
                    thumbnail_url: 'https://images.unsplash.com/photo-1511379938547-c1f69419868d?w=800&h=450&fit=crop',
                    file_url: 'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4',
                    media_type: 'video',
                    genre: 'Music',
                    created_at: new Date().toISOString(),
                    creator: 'Music Africa',
                    creator_display_name: 'Music Africa',
                    duration: 3600,
                    language: 'English',
                    views: 12500,
                    likes: 890,
                    subscriber_count: 1500
                };
                
                // Update UI
                updateContentUI();
                
                // Load sample related content
                relatedContent = [
                    {
                        id: '2',
                        title: 'Tech Innovation in Africa',
                        thumbnail_url: 'https://images.unsplash.com/photo-1558494949-ef010cbdcc31?w=400&h=225&fit=crop',
                        views: 8900,
                        views_count: 8900
                    },
                    {
                        id: '3',
                        title: 'Traditional Dance Performance',
                        thumbnail_url: 'https://images.unsplash.com/photo-1547153760-18fc86324498?w=400&h=225&fit=crop',
                        views: 15600,
                        views_count: 15600
                    },
                    {
                        id: '4',
                        title: 'African Cuisine Cooking Show',
                        thumbnail_url: 'https://images.unsplash.com/photo-1565958011703-44f9829ba187?w=400&h=225&fit=crop',
                        views: 7800,
                        views_count: 7800
                    },
                    {
                        id: '5',
                        title: 'Startup Success Stories',
                        thumbnail_url: 'https://images.unsplash.com/photo-1556761175-b413da4baf72?w=400&h=225&fit=crop',
                        views: 11200,
                        views_count: 11200
                    },
                    {
                        id: '6',
                        title: 'African Wildlife Documentary',
                        thumbnail_url: 'https://images.unsplash.com/photo-1575550959106-5a7defe08b56?w=400&h=225&fit=crop',
                        views: 9400,
                        views_count: 9400
                    },
                    {
                        id: '7',
                        title: 'African Fashion Week',
                        thumbnail_url: 'https://images.unsplash.com/photo-1490481651871-ab68de25d43d?w=400&h=225&fit=crop',
                        views: 6700,
                        views_count: 6700
                    }
                ];
                
                renderRelatedContent();
                
                // Show the app
                loadingScreen.style.display = 'none';
                app.style.display = 'block';
                
                // Set up event listeners
                setupEventListeners();
                
                // Initialize back to top button
                initBackToTop();
                
                showToast('Using sample data. Supabase connection may be unavailable.', 'info');
            }
            
            // ‚úÖ SETUP EVENT LISTENERS
            function setupEventListeners() {
                // Play button
                playBtn.addEventListener('click', handlePlayPressed);
                
                // Download button
                downloadBtn.addEventListener('click', handleDownloadPressed);
                
                // Favorite button
                favoriteBtn.addEventListener('click', toggleFavorite);
                
                // Share button
                shareBtn.addEventListener('click', shareContent);
                
                // Subscribe button
                subscribeBtn.addEventListener('click', toggleSubscription);
                
                // Refresh comments button
                refreshCommentsBtn.addEventListener('click', () => {
                    showToast('Comments refreshed', 'success');
                });
                
                // Send comment button
                sendCommentBtn.addEventListener('click', addComment);
                
                // Comment input enter key
                commentInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        addComment();
                    }
                });
                
                // Show more button
                showMoreBtn.addEventListener('click', toggleDescription);
                
                // Edit comment modal
                closeEditModal.addEventListener('click', () => editCommentModal.style.display = 'none');
                cancelEditBtn.addEventListener('click', () => editCommentModal.style.display = 'none');
                saveEditBtn.addEventListener('click', saveEditedComment);
                
                // Delete comment modal
                cancelDeleteBtn.addEventListener('click', () => deleteCommentModal.style.display = 'none');
                confirmDeleteBtn.addEventListener('click', deleteComment);
                
                // Download modal
                closeDownloadModal.addEventListener('click', () => downloadModal.style.display = 'none');
                cancelDownloadBtn.addEventListener('click', () => downloadModal.style.display = 'none');
                confirmDownloadBtn.addEventListener('click', startDownload);
                
                // Close modals when clicking outside
                document.querySelectorAll('.modal-overlay').forEach(modal => {
                    modal.addEventListener('click', (e) => {
                        if (e.target === modal) {
                            modal.style.display = 'none';
                        }
                    });
                });
                
                // Header buttons
                document.getElementById('search-btn').addEventListener('click', () => {
                    showToast('Search functionality coming soon!', 'info');
                });
                
                document.getElementById('profile-btn').addEventListener('click', () => {
                    showToast('Profile page coming soon!', 'info');
                });
            }
            
            // ‚úÖ HANDLE PLAY PRESSED
            function handlePlayPressed() {
                if (!contentData) return;
                
                showToast(`Playing "${contentData.title}"`, 'success');
                
                // In a real app, navigate to video player
                console.log('Playing:', contentData.title);
            }
            
            // ‚úÖ HANDLE DOWNLOAD PRESSED
            function handleDownloadPressed() {
                if (!contentData) return;
                
                downloadModalText.textContent = `Download "${contentData.title}" for offline viewing?`;
                downloadModal.style.display = 'flex';
            }
            
            // ‚úÖ START DOWNLOAD
            function startDownload() {
                downloadModal.style.display = 'none';
                
                // Show download progress
                showToast('Download started...', 'info');
                
                // Simulate download
                setTimeout(() => {
                    showToast('Download completed successfully!', 'success');
                }, 3000);
            }
            
            // ‚úÖ TOGGLE FAVORITE
            function toggleFavorite() {
                isInFavorites = !isInFavorites;
                
                if (isInFavorites) {
                    favoriteBtn.querySelector('i').className = 'fas fa-heart';
                    favoriteBtn.querySelector('span').textContent = 'Favorited';
                    showToast('Added to favorites', 'success');
                } else {
                    favoriteBtn.querySelector('i').className = 'far fa-heart';
                    favoriteBtn.querySelector('span').textContent = 'Favorite';
                    showToast('Removed from favorites', 'info');
                }
            }
            
            // ‚úÖ SHARE CONTENT
            function shareContent() {
                if (!contentData) return;
                
                const shareData = {
                    title: contentData.title,
                    text: `Check out "${contentData.title}" on Bantu Stream Connect`,
                    url: window.location.href
                };
                
                if (navigator.share) {
                    navigator.share(shareData)
                        .then(() => showToast('Shared successfully!', 'success'))
                        .catch(err => {
                            if (err.name !== 'AbortError') {
                                copyToClipboard(window.location.href);
                            }
                        });
                } else {
                    copyToClipboard(window.location.href);
                }
            }
            
            // ‚úÖ TOGGLE SUBSCRIPTION
            function toggleSubscription() {
                isSubscribed = !isSubscribed;
                
                if (isSubscribed) {
                    subscribeBtn.innerHTML = '<i class="fas fa-user-check"></i><span>Subscribed</span>';
                    subscribeBtn.classList.add('subscribed');
                    showToast('Subscribed successfully!', 'success');
                } else {
                    subscribeBtn.innerHTML = '<i class="fas fa-user-plus"></i><span>Subscribe</span>';
                    subscribeBtn.classList.remove('subscribed');
                    showToast('Unsubscribed', 'info');
                }
            }
            
            // ‚úÖ ADD COMMENT
            function addComment() {
                const commentText = commentInput.value.trim();
                if (!commentText) {
                    showToast('Please enter a comment', 'warning');
                    return;
                }
                
                // Create a sample comment
                const newComment = {
                    id: Date.now().toString(),
                    comment_text: commentText,
                    author_name: 'You',
                    created_at: new Date().toISOString(),
                    like_count: 0
                };
                
                // Add to comments list
                comments.unshift(newComment);
                
                // Clear input
                commentInput.value = '';
                
                // Update UI
                renderComments();
                showToast('Comment added successfully!', 'success');
            }
            
            // ‚úÖ RENDER COMMENTS
            function renderComments() {
                if (!comments.length) {
                    noComments.style.display = 'block';
                    commentsCount.textContent = '(0)';
                    return;
                }
                
                noComments.style.display = 'none';
                commentsCount.textContent = `(${comments.length})`;
                
                // Clear existing comments except no-comments placeholder
                const existingComments = commentsList.querySelectorAll('.comment-item');
                existingComments.forEach(comment => comment.remove());
                
                comments.forEach(comment => {
                    const commentEl = document.createElement('div');
                    commentEl.className = 'comment-item';
                    commentEl.dataset.commentId = comment.id;
                    
                    const userName = comment.author_name || 'User';
                    const createdAt = comment.created_at ? formatCommentTime(comment.created_at) : 'Recently';
                    
                    commentEl.innerHTML = `
                        <div class="comment-header">
                            <div class="comment-avatar-sm">
                                <i class="fas fa-user-circle"></i>
                            </div>
                            <div class="comment-user">
                                <strong>${userName}</strong>
                                <div class="comment-time">${createdAt}</div>
                            </div>
                            <div class="comment-actions">
                                <button class="comment-action-btn edit-btn" title="Edit">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="comment-action-btn delete-btn" title="Delete">
                                    <i class="fas fa-trash"></i>
                                </button>
                                <button class="comment-action-btn like-btn" title="Like">
                                    <i class="far fa-heart"></i>
                                </button>
                            </div>
                        </div>
                        <div class="comment-content">
                            ${comment.comment_text || comment.comment || ''}
                        </div>
                        <div class="comment-footer">
                            <div class="like-count">
                                <i class="fas fa-heart"></i>
                                <span>${comment.like_count || 0} likes</span>
                            </div>
                        </div>
                    `;
                    
                    // Add event listeners
                    const editBtn = commentEl.querySelector('.edit-btn');
                    const deleteBtn = commentEl.querySelector('.delete-btn');
                    const likeBtn = commentEl.querySelector('.like-btn');
                    
                    editBtn.addEventListener('click', () => editComment(comment.id, comment.comment_text || comment.comment));
                    deleteBtn.addEventListener('click', () => confirmDeleteComment(comment.id));
                    likeBtn.addEventListener('click', () => toggleCommentLike(comment.id, likeBtn));
                    
                    commentsList.appendChild(commentEl);
                });
            }
            
            // ‚úÖ EDIT COMMENT
            function editComment(commentId, currentText) {
                editingCommentId = commentId;
                editCommentInput.value = currentText;
                editCommentModal.style.display = 'flex';
            }
            
            // ‚úÖ SAVE EDITED COMMENT
            function saveEditedComment() {
                if (!editingCommentId || !editCommentInput.value.trim()) {
                    editCommentModal.style.display = 'none';
                    return;
                }
                
                // Find and update comment
                const commentIndex = comments.findIndex(c => c.id === editingCommentId);
                if (commentIndex !== -1) {
                    comments[commentIndex].comment_text = editCommentInput.value.trim();
                }
                
                editCommentModal.style.display = 'none';
                editCommentInput.value = '';
                editingCommentId = null;
                
                renderComments();
                showToast('Comment updated successfully!', 'success');
            }
            
            // ‚úÖ CONFIRM DELETE COMMENT
            function confirmDeleteComment(commentId) {
                deletingCommentId = commentId;
                deleteCommentModal.style.display = 'flex';
            }
            
            // ‚úÖ DELETE COMMENT
            function deleteComment() {
                if (!deletingCommentId) {
                    deleteCommentModal.style.display = 'none';
                    return;
                }
                
                // Remove comment
                comments = comments.filter(c => c.id !== deletingCommentId);
                
                deleteCommentModal.style.display = 'none';
                deletingCommentId = null;
                
                renderComments();
                showToast('Comment deleted successfully!', 'success');
            }
            
            // ‚úÖ TOGGLE COMMENT LIKE
            function toggleCommentLike(commentId, likeBtn) {
                const comment = comments.find(c => c.id === commentId);
                if (!comment) return;
                
                comment.like_count = (comment.like_count || 0) + 1;
                likeBtn.querySelector('i').className = 'fas fa-heart';
                likeBtn.classList.add('liked');
                
                renderComments();
                showToast('Liked comment!', 'success');
            }
            
            // ‚úÖ TOGGLE DESCRIPTION
            function toggleDescription() {
                const fullDescription = contentData.description;
                const currentText = contentDescriptionFull.textContent;
                
                if (currentText.includes('...')) {
                    // Show full description
                    contentDescriptionFull.textContent = fullDescription;
                    showMoreBtn.textContent = 'Show less';
                } else {
                    // Show truncated description
                    contentDescriptionFull.textContent = fullDescription.substring(0, 300) + '...';
                    showMoreBtn.textContent = 'Show more';
                }
            }
            
            // ‚úÖ INIT BACK TO TOP BUTTON
            function initBackToTop() {
                window.addEventListener('scroll', () => {
                    if (window.pageYOffset > 300) {
                        backToTopBtn.style.display = 'flex';
                    } else {
                        backToTopBtn.style.display = 'none';
                    }
                });
                
                backToTopBtn.addEventListener('click', () => {
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
            }
            
            // ‚úÖ UTILITY FUNCTIONS
            
            function formatDate(dateString) {
                if (!dateString) return '-';
                const date = new Date(dateString);
                return date.toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric'
                });
            }
            
            function formatDuration(seconds) {
                if (!seconds) return '-';
                const hours = Math.floor(seconds / 3600);
                const minutes = Math.floor((seconds % 3600) / 60);
                const remainingSeconds = seconds % 60;
                
                if (hours > 0) {
                    return `${hours}h ${minutes}m`;
                } else if (minutes > 0) {
                    return `${minutes}m ${remainingSeconds}s`;
                } else {
                    return `${remainingSeconds}s`;
                }
            }
            
            function formatCommentTime(dateString) {
                if (!dateString) return 'Recently';
                
                try {
                    const date = new Date(dateString);
                    const now = new Date();
                    const diffMs = now - date;
                    const diffSec = Math.floor(diffMs / 1000);
                    const diffMin = Math.floor(diffSec / 60);
                    const diffHour = Math.floor(diffMin / 60);
                    const diffDay = Math.floor(diffHour / 24);
                    
                    if (diffDay > 0) return `${diffDay}d ago`;
                    if (diffHour > 0) return `${diffHour}h ago`;
                    if (diffMin > 0) return `${diffMin}m ago`;
                    return 'Just now';
                } catch (e) {
                    return 'Recently';
                }
            }
            
            function showToast(message, type = 'info') {
                // Remove existing toast
                const existingToast = document.querySelector('.toast');
                if (existingToast) existingToast.remove();
                
                // Create new toast
                const toast = document.createElement('div');
                toast.className = `toast ${type}`;
                
                let icon = 'info-circle';
                if (type === 'success') icon = 'check-circle';
                if (type === 'error') icon = 'exclamation-circle';
                if (type === 'warning') icon = 'exclamation-triangle';
                
                toast.innerHTML = `
                    <i class="fas fa-${icon}"></i>
                    <span>${message}</span>
                `;
                
                toastContainer.appendChild(toast);
                
                // Remove toast after 3 seconds
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.style.opacity = '0';
                        setTimeout(() => {
                            if (toast.parentNode) toast.remove();
                        }, 300);
                    }
                }, 3000);
            }
            
            function copyToClipboard(text) {
                navigator.clipboard.writeText(text)
                    .then(() => showToast('Link copied to clipboard!', 'success'))
                    .catch(err => {
                        console.error('Failed to copy:', err);
                        showToast('Failed to copy link', 'error');
                    });
            }
            
            // ‚úÖ START INITIALIZATION
            setTimeout(() => {
                init();
            }, 500);
            
            console.log('‚úÖ Content detail script loaded');
        });
    </script>
</body>
</html>
